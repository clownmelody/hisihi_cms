/* 
* orgbasicinfo分享页面 v3.1 2016-10-20 
* 描述信息： 1修改评价正文最多显示5排，超过5排则余下正文化不显示. 2.调整每条评价显示的样式，将发布时间移到昵称下方.3.删除综合评分，文字“共有1份评论”移到学生评论的右侧 
* 主页： heishehui.cn
* Copyright (c) 2016   嘿设汇前端团队 jimmy;
*/
function FastClick(a){"use strict";function b(a,b){return function(){return a.apply(b,arguments)}}var c;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,FastClick.notNeeded(a)||(deviceIsAndroid&&(a.addEventListener("mouseover",b(this.onMouse,this),!0),a.addEventListener("mousedown",b(this.onMouse,this),!0),a.addEventListener("mouseup",b(this.onMouse,this),!0)),a.addEventListener("click",b(this.onClick,this),!0),a.addEventListener("touchstart",b(this.onTouchStart,this),!1),a.addEventListener("touchmove",b(this.onTouchMove,this),!1),a.addEventListener("touchend",b(this.onTouchEnd,this),!1),a.addEventListener("touchcancel",b(this.onTouchCancel,this),!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(c=a.onclick,a.addEventListener("click",function(a){c(a)},!1),a.onclick=null))}var Zepto=function(){function a(a){return null==a?String(a):W[X.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return E.call(a,function(a){return null!=a})}function i(a){return a.length>0?y.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in I?I[a]:I[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||J[j(a)]?b:b+"px"}function m(a){var b,c;return H[a]||(b=G.createElement(a),G.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),H[a]=c),H[a]}function n(a){return"children"in a?F.call(a.children):y.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b){var c,d=a?a.length:0;for(c=0;d>c;c++)this[c]=a[c];this.length=d,this.selector=b||""}function p(a,b,c){for(x in b)c&&(f(b[x])||_(b[x]))?(f(b[x])&&!f(a[x])&&(a[x]={}),_(b[x])&&!_(a[x])&&(a[x]=[]),p(a[x],b[x],c)):b[x]!==w&&(a[x]=b[x])}function q(a,b){return null==b?y(a):y(a).filter(b)}function r(a,c,d,e){return b(c)?c.call(a,d,e):c}function s(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function t(a,b){var c=a.className||"",d=c&&c.baseVal!==w;return b===w?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function u(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?y.parseJSON(a):a):a}catch(b){return a}}function v(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)v(a.childNodes[c],b)}var w,x,y,z,A,B,C=[],D=C.concat,E=C.filter,F=C.slice,G=window.document,H={},I={},J={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},K=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,N=/^(?:body|html)$/i,O=/([A-Z])/g,P=["val","css","html","text","data","width","height","offset"],Q=["after","prepend","before","append"],R=G.createElement("table"),S=G.createElement("tr"),T={tr:G.createElement("tbody"),tbody:R,thead:R,tfoot:R,td:S,th:S,"*":G.createElement("div")},U=/complete|loaded|interactive/,V=/^[\w-]*$/,W={},X=W.toString,Y={},Z=G.createElement("div"),$={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},_=Array.isArray||function(a){return a instanceof Array};return Y.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=Z).appendChild(a),d=~Y.qsa(e,b).indexOf(a),f&&Z.removeChild(a),d},A=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},B=function(a){return E.call(a,function(b,c){return a.indexOf(b)==c})},Y.fragment=function(a,b,c){var d,e,g;return L.test(a)&&(d=y(G.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(M,"<$1></$2>")),b===w&&(b=K.test(a)&&RegExp.$1),b in T||(b="*"),g=T[b],g.innerHTML=""+a,d=y.each(F.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=y(d),y.each(c,function(a,b){P.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},Y.Z=function(a,b){return new o(a,b)},Y.isZ=function(a){return a instanceof Y.Z},Y.init=function(a,c){var d;if(!a)return Y.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&K.test(a))d=Y.fragment(a,RegExp.$1,c),a=null;else{if(c!==w)return y(c).find(a);d=Y.qsa(G,a)}else{if(b(a))return y(G).ready(a);if(Y.isZ(a))return a;if(_(a))d=h(a);else if(e(a))d=[a],a=null;else if(K.test(a))d=Y.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==w)return y(c).find(a);d=Y.qsa(G,a)}}return Y.Z(d,a)},y=function(a,b){return Y.init(a,b)},y.extend=function(a){var b,c=F.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){p(a,c,b)}),a},Y.qsa=function(a,b){var c,d="#"==b[0],e=!d&&"."==b[0],f=d||e?b.slice(1):b,g=V.test(f);return a.getElementById&&g&&d?(c=a.getElementById(f))?[c]:[]:1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType?[]:F.call(g&&!d&&a.getElementsByClassName?e?a.getElementsByClassName(f):a.getElementsByTagName(b):a.querySelectorAll(b))},y.contains=G.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},y.type=a,y.isFunction=b,y.isWindow=c,y.isArray=_,y.isPlainObject=f,y.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},y.inArray=function(a,b,c){return C.indexOf.call(b,a,c)},y.camelCase=A,y.trim=function(a){return null==a?"":String.prototype.trim.call(a)},y.uuid=0,y.support={},y.expr={},y.noop=function(){},y.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},y.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},y.grep=function(a,b){return E.call(a,b)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()}),y.fn={constructor:Y.Z,length:0,forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,splice:C.splice,indexOf:C.indexOf,concat:function(){var a,b,c=[];for(a=0;a<arguments.length;a++)b=arguments[a],c[a]=Y.isZ(b)?b.toArray():b;return D.apply(Y.isZ(this)?this.toArray():this,c)},map:function(a){return y(y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return y(F.apply(this,arguments))},ready:function(a){return U.test(G.readyState)&&G.body?a(y):G.addEventListener("DOMContentLoaded",function(){a(y)},!1),this},get:function(a){return a===w?F.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return C.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):y(E.call(this,function(b){return Y.matches(b,a)}))},add:function(a,b){return y(B(this.concat(y(a,b))))},is:function(a){return this.length>0&&Y.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==w)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?F.call(a):y(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return y(c)},has:function(a){return this.filter(function(){return e(a)?y.contains(this,a):y(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:y(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:y(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?y(a).filter(function(){var a=this;return C.some.call(c,function(b){return y.contains(b,a)})}):1==this.length?y(Y.qsa(this[0],a)):this.map(function(){return Y.qsa(this,a)}):y()},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=y(a));c&&!(e?e.indexOf(c)>=0:Y.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return y(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=y.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return q(b,a)},parent:function(a){return q(B(this.pluck("parentNode")),a)},children:function(a){return q(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||F.call(this.childNodes)})},siblings:function(a){return q(this.map(function(a,b){return E.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return y.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=y(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){y(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){y(this[0]).before(a=y(a));for(var b;(b=a.children()).length;)a=b.first();y(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=y(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){y(this).replaceWith(y(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=y(this);(a===w?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return y(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return y(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var c=this.innerHTML;y(this).empty().append(r(this,a,b,c))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=r(this,a,b,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this[0].textContent:null},attr:function(a,b){var c;return"string"!=typeof a||1 in arguments?this.each(function(c){if(1===this.nodeType)if(e(a))for(x in a)s(this,x,a[x]);else s(this,a,r(this,b,c,this.getAttribute(a)))}):this.length&&1===this[0].nodeType?!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:w},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){s(this,a)},this)})},prop:function(a,b){return a=$[a]||a,1 in arguments?this.each(function(c){this[a]=r(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(a,b){var c="data-"+a.replace(O,"-$1").toLowerCase(),d=1 in arguments?this.attr(c,b):this.attr(c);return null!==d?u(d):w},val:function(a){return 0 in arguments?this.each(function(b){this.value=r(this,a,b,this.value)}):this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=y(this),d=r(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;if(!y.contains(G.documentElement,this[0]))return{top:0,left:0};var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d,e=this[0];if(!e)return;if(d=getComputedStyle(e,""),"string"==typeof b)return e.style[A(b)]||d.getPropertyValue(b);if(_(b)){var f={};return y.each(b,function(a,b){f[b]=e.style[A(b)]||d.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(x in b)b[x]||0===b[x]?g+=j(x)+":"+l(x,b[x])+";":this.each(function(){this.style.removeProperty(j(x))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(y(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?C.some.call(this,function(a){return this.test(t(a))},k(a)):!1},addClass:function(a){return a?this.each(function(b){if("className"in this){z=[];var c=t(this),d=r(this,a,b,c);d.split(/\s+/g).forEach(function(a){y(this).hasClass(a)||z.push(a)},this),z.length&&t(this,c+(c?" ":"")+z.join(" "))}}):this},removeClass:function(a){return this.each(function(b){if("className"in this){if(a===w)return t(this,"");z=t(this),r(this,a,b,z).split(/\s+/g).forEach(function(a){z=z.replace(k(a)," ")}),t(this,z.trim())}})},toggleClass:function(a,b){return a?this.each(function(c){var d=y(this),e=r(this,a,c,t(this));e.split(/\s+/g).forEach(function(a){(b===w?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===w?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===w?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=N.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(y(a).css("margin-top"))||0,c.left-=parseFloat(y(a).css("margin-left"))||0,d.top+=parseFloat(y(b[0]).css("border-top-width"))||0,d.left+=parseFloat(y(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||G.body;a&&!N.test(a.nodeName)&&"static"==y(a).css("position");)a=a.offsetParent;return a})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});y.fn[a]=function(e){var f,g=this[0];return e===w?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=y(this),g.css(a,r(this,e,b,g[a]()))})}}),Q.forEach(function(b,c){var d=c%2;y.fn[b]=function(){var b,e,f=y.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:Y.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=y.contains(G.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return y(a).remove();e.insertBefore(a,b),h&&v(a,function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},y.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return y(a)[b](this),this}}),Y.Z.prototype=o.prototype=y.fn,Y.uniq=B,Y.deserializeValue=u,y.zepto=Y,y}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/,z=s.createElement("a");z.href=window.location.href,a.active=0,a.ajaxJSONP=function(b,c){if("type"in b){var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)}return a.ajax(b)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c,e,i=a.extend({},b||{}),n=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===i[p]&&(i[p]=a.ajaxSettings[p]);d(i),i.crossDomain||(c=s.createElement("a"),c.href=i.url,c.href=c.href,i.crossDomain=z.protocol+"//"+z.host!=c.protocol+"//"+c.host),i.url||(i.url=window.location.toString()),(e=i.url.indexOf("#"))>-1&&(i.url=i.url.slice(0,e)),m(i);var o=i.dataType,r=/\?.+=\?/.test(i.url);if(r&&(o="jsonp"),i.cache!==!1&&(b&&b.cache===!0||"script"!=o&&"jsonp"!=o)||(i.url=l(i.url,"_="+Date.now())),"jsonp"==o)return r||(i.url=l(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),a.ajaxJSONP(i,n);var t,u=i.accepts[o],v={},w=function(a,b){v[a.toLowerCase()]=[a,b]},x=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,A=i.xhr(),B=A.setRequestHeader;if(n&&n.promise(A),i.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",u||"*/*"),(u=i.mimeType||u)&&(u.indexOf(",")>-1&&(u=u.split(",",2)[0]),A.overrideMimeType&&A.overrideMimeType(u)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&w("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(q in i.headers)w(q,i.headers[q]);if(A.setRequestHeader=w,A.onreadystatechange=function(){if(4==A.readyState){A.onreadystatechange=j,clearTimeout(t);var b,c=!1;if(A.status>=200&&A.status<300||304==A.status||0==A.status&&"file:"==x){o=o||k(i.mimeType||A.getResponseHeader("content-type")),b=A.responseText;try{"script"==o?(1,eval)(b):"xml"==o?b=A.responseXML:"json"==o&&(b=y.test(b)?null:a.parseJSON(b))}catch(d){c=d}c?h(c,"parsererror",A,i,n):g(b,A,i,n)}else h(A.statusText||null,A.status?"error":"abort",A,i,n)}},f(A,i)===!1)return A.abort(),h(null,"abort",A,i,n),A;if(i.xhrFields)for(q in i.xhrFields)A[q]=i.xhrFields[q];var C="async"in i?i.async:!0;A.open(i.type,i.url,C,i.username,i.password);for(q in v)B.apply(A,v[q]);return i.timeout>0&&(t=setTimeout(function(){A.onreadystatechange=j,A.abort(),h(null,"timeout",A,i,n)},i.timeout)),A.send(i.data?i.data:null),A},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var A=encodeURIComponent;a.param=function(b,c){var d=[];return d.add=function(b,c){a.isFunction(c)&&(c=c()),null==c&&(c=""),this.push(A(b)+"="+A(c))},o(d,b,c),d.join("&").replace(/%20/g,"+")}}(Zepto),function(a){var b,c=[];a.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(c.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",b&&clearTimeout(b),b=setTimeout(function(){c=[]},6e4)),this.parentNode.removeChild(this))})}}(Zepto),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return a&&(!c.e||a.e==c.e)&&(!c.ns||h.test(a.ns))&&(!f||b(a.fn)===b(f))&&(!g||a.sel==g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){var e=2 in arguments&&n.call(arguments,2);if(o(c)){var f=function(){return c.apply(d,e?e.concat(n.call(arguments)):arguments)};return f._zid=b(c),f}if(p(d))return e?(e.unshift(c[d],c),a.proxy.apply(null,e)):a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(e===l||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){b.type in t&&"function"==typeof this[b.type]?this[b.type]():"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return 0 in arguments?this.bind(b,a):this.trigger(b)}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c,d=[],e=function(a){return a.forEach?a.forEach(e):void d.push({name:b,value:a})};return this[0]&&a.each(this[0].elements,function(d,f){c=f.type,b=f.name,b&&"fieldset"!=f.nodeName.toLowerCase()&&!f.disabled&&"submit"!=c&&"reset"!=c&&"button"!=c&&"file"!=c&&("radio"!=c&&"checkbox"!=c||f.checked)&&e(a(f).val())}),d},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(0 in arguments)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(a,b){function c(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function d(a){return e?e+a:a.toLowerCase()}var e,f,g,h,i,j,k,l,m,n,o="",p={Webkit:"webkit",Moz:"",O:"o"},q=document.createElement("div"),r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,s={};a.each(p,function(a,c){return q.style[a+"TransitionProperty"]!==b?(o="-"+a.toLowerCase()+"-",e=c,!1):void 0}),f=o+"transform",s[g=o+"transition-property"]=s[h=o+"transition-duration"]=s[j=o+"transition-delay"]=s[i=o+"transition-timing-function"]=s[k=o+"animation-name"]=s[l=o+"animation-duration"]=s[n=o+"animation-delay"]=s[m=o+"animation-timing-function"]="",a.fx={off:e===b&&q.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:o,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(c,d,e,f,g){return a.isFunction(d)&&(f=d,e=b,d=b),a.isFunction(e)&&(f=e,e=b),a.isPlainObject(d)&&(e=d.easing,f=d.complete,g=d.delay,d=d.duration),d&&(d=("number"==typeof d?d:a.fx.speeds[d]||a.fx.speeds._default)/1e3),g&&(g=parseFloat(g)/1e3),this.anim(c,d,e,f,g)},a.fn.anim=function(d,e,o,p,q){var t,u,v,w={},x="",y=this,z=a.fx.transitionEnd,A=!1;if(e===b&&(e=a.fx.speeds._default/1e3),q===b&&(q=0),a.fx.off&&(e=0),"string"==typeof d)w[k]=d,w[l]=e+"s",w[n]=q+"s",w[m]=o||"linear",z=a.fx.animationEnd;else{u=[];for(t in d)r.test(t)?x+=t+"("+d[t]+") ":(w[t]=d[t],u.push(c(t)));x&&(w[f]=x,u.push(f)),e>0&&"object"==typeof d&&(w[g]=u.join(", "),w[h]=e+"s",w[j]=q+"s",w[i]=o||"linear")}return v=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(z,v)}else a(this).unbind(z,v);A=!0,a(this).css(s),p&&p.call(this)},e>0&&(this.bind(z,v),setTimeout(function(){A||v.call(y)},1e3*(e+q)+25)),this.size()&&this.get(0).clientLeft,this.css(w),0>=e&&setTimeout(function(){y.each(function(){v.call(this)})},0),this},q=null}(Zepto),function(a,b){function c(c,d,e,f,g){"function"!=typeof d||g||(g=d,d=b);var h={opacity:e};return f&&(h.scale=f,c.css(a.fx.cssPrefix+"transform-origin","0 0")),c.animate(h,d,null,g)}function d(b,d,e,f){return c(b,d,0,e,function(){g.call(a(this)),f&&f.call(this)})}var e=window.document,f=(e.documentElement,a.fn.show),g=a.fn.hide,h=a.fn.toggle;a.fn.show=function(a,d){return f.call(this),a===b?a=0:this.css("opacity",0),c(this,a,1,"1,1",d)},a.fn.hide=function(a,c){return a===b?g.call(this):d(this,a,"0,0",c)},a.fn.toggle=function(c,d){return c===b||"boolean"==typeof c?h.call(this,c):this.each(function(){var b=a(this);b["none"==b.css("display")?"show":"hide"](c,d)})},a.fn.fadeTo=function(a,b,d){return c(this,a,b,null,d)},a.fn.fadeIn=function(a,b){var c=this.css("opacity");return c>0?this.css("opacity",0):c=1,f.call(this).fadeTo(a,c,b)},a.fn.fadeOut=function(a,b){return d(this,a,null,b)},a.fn.fadeToggle=function(b,c){return this.each(function(){var d=a(this);d[0==d.css("opacity")||"none"==d.css("display")?"fadeIn":"fadeOut"](b,c)})}}(Zepto),function(){try{getComputedStyle(void 0)}catch(a){var b=getComputedStyle;window.getComputedStyle=function(a){try{return b(a)}catch(c){return null}}}}(),function(a){function b(b){return b=a(b),!(!b.width()&&!b.height()||"none"===b.css("display"))}function c(a,b){a=a.replace(/=#\]/g,'="#"]');var c,d,e=h.exec(a);if(e&&e[2]in g&&(c=g[e[2]],d=e[3],a=e[1],d)){var f=Number(d);d=isNaN(f)?d.replace(/^["']|["']$/g,""):f}return b(a,c,d)}var d=a.zepto,e=d.qsa,f=d.matches,g=a.expr[":"]={visible:function(){return b(this)?this:void 0},hidden:function(){return b(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(a){return 0===a?this:void 0},last:function(a,b){return a===b.length-1?this:void 0},eq:function(a,b,c){return a===c?this:void 0},contains:function(b,c,d){return a(this).text().indexOf(d)>-1?this:void 0},has:function(a,b,c){return d.qsa(this,c).length?this:void 0}},h=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),i=/^\s*>/,j="Zepto"+ +new Date;d.qsa=function(b,f){return c(f,function(c,g,h){try{var k;!c&&g?c="*":i.test(c)&&(k=a(b).addClass(j),c="."+j+" "+c);var l=e(b,c)}catch(m){throw console.error("error performing selector: %o",f),m}finally{k&&k.removeClass(j)}return g?d.uniq(a.map(l,function(a,b){return g.call(a,b,l,h)})):l})},d.matches=function(a,b){return c(b,function(b,c,d){return(!b||f(a,b))&&(!c||c.call(a,null,d)===a)})}}(Zepto),function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){k=null,m.last&&(m.el.trigger("longTap"),m={})}function d(){k&&clearTimeout(k),k=null}function e(){h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),k&&clearTimeout(k),h=i=j=k=null,m={}}function f(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function g(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}var h,i,j,k,l,m={},n=750;a(document).ready(function(){var o,p,q,r,s=0,t=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),a(document).bind("MSGestureEnd",function(a){var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(m.el.trigger("swipe"),
m.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){(!(r=g(b,"down"))||f(b))&&(q=r?b:b.touches[0],b.touches&&1===b.touches.length&&m.x2&&(m.x2=void 0,m.y2=void 0),o=Date.now(),p=o-(m.last||o),m.el=a("tagName"in q.target?q.target:q.target.parentNode),h&&clearTimeout(h),m.x1=q.pageX,m.y1=q.pageY,p>0&&250>=p&&(m.isDoubleTap=!0),m.last=o,k=setTimeout(c,n),l&&r&&l.addPointer(b.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(!(r=g(a,"move"))||f(a))&&(q=r?a:a.touches[0],d(),m.x2=q.pageX,m.y2=q.pageY,s+=Math.abs(m.x1-m.x2),t+=Math.abs(m.y1-m.y2))}).on("touchend MSPointerUp pointerup",function(c){(!(r=g(c,"up"))||f(c))&&(d(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30?j=setTimeout(function(){m.el.trigger("swipe"),m.el.trigger("swipe"+b(m.x1,m.x2,m.y1,m.y2)),m={}},0):"last"in m&&(30>s&&30>t?i=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=e,m.el.trigger(b),m.isDoubleTap?(m.el&&m.el.trigger("doubleTap"),m={}):h=setTimeout(function(){h=null,m.el&&m.el.trigger("singleTap"),m={}},250)},0):m={}),s=t=0)}).on("touchcancel MSPointerCancel pointercancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)}})}(Zepto),define("$",function(){}),define("fx",["$"],function(){!function(a,b){function c(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function d(a){return e?e+a:a.toLowerCase()}var e,f,g,h,i,j,k,l,m,n,o="",p={Webkit:"webkit",Moz:"",O:"o"},q=document.createElement("div"),r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,s={};a.each(p,function(a,c){return q.style[a+"TransitionProperty"]!==b?(o="-"+a.toLowerCase()+"-",e=c,!1):void 0}),f=o+"transform",s[g=o+"transition-property"]=s[h=o+"transition-duration"]=s[j=o+"transition-delay"]=s[i=o+"transition-timing-function"]=s[k=o+"animation-name"]=s[l=o+"animation-duration"]=s[n=o+"animation-delay"]=s[m=o+"animation-timing-function"]="",a.fx={off:e===b&&q.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:o,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(c,d,e,f,g){return a.isFunction(d)&&(f=d,e=b,d=b),a.isFunction(e)&&(f=e,e=b),a.isPlainObject(d)&&(e=d.easing,f=d.complete,g=d.delay,d=d.duration),d&&(d=("number"==typeof d?d:a.fx.speeds[d]||a.fx.speeds._default)/1e3),g&&(g=parseFloat(g)/1e3),this.anim(c,d,e,f,g)},a.fn.anim=function(d,e,o,p,q){var t,u,v,w={},x="",y=this,z=a.fx.transitionEnd,A=!1;if(e===b&&(e=a.fx.speeds._default/1e3),q===b&&(q=0),a.fx.off&&(e=0),"string"==typeof d)w[k]=d,w[l]=e+"s",w[n]=q+"s",w[m]=o||"linear",z=a.fx.animationEnd;else{u=[];for(t in d)r.test(t)?x+=t+"("+d[t]+") ":(w[t]=d[t],u.push(c(t)));x&&(w[f]=x,u.push(f)),e>0&&"object"==typeof d&&(w[g]=u.join(", "),w[h]=e+"s",w[j]=q+"s",w[i]=o||"linear")}return v=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(z,v)}else a(this).unbind(z,v);A=!0,a(this).css(s),p&&p.call(this)},e>0&&(this.bind(z,v),setTimeout(function(){A||v.call(y)},1e3*(e+q)+25)),this.size()&&this.get(0).clientLeft,this.css(w),0>=e&&setTimeout(function(){y.each(function(){v.call(this)})},0),this},q=null}(Zepto)}),function(){function a(a,b){return[].slice.call((b||document).querySelectorAll(a))}if(window.addEventListener){var b=window.StyleFix={link:function(a){try{if("stylesheet"!==a.rel||a.hasAttribute("data-noprefix"))return}catch(c){return}var d,e=a.href||a.getAttribute("data-href"),f=e.replace(/[^\/]+$/,""),g=(/^[a-z]{3,10}:/.exec(f)||[""])[0],h=(/^[a-z]{3,10}:\/\/[^\/]+/.exec(f)||[""])[0],i=/^([^?]*)\??/.exec(e)[1],j=a.parentNode,k=new XMLHttpRequest;k.onreadystatechange=function(){4===k.readyState&&d()},d=function(){var c=k.responseText;if(c&&a.parentNode&&(!k.status||400>k.status||600<k.status)){if(c=b.fix(c,!0,a),f)var c=c.replace(/url\(\s*?((?:"|')?)(.+?)\1\s*?\)/gi,function(a,b,c){return/^([a-z]{3,10}:|#)/i.test(c)?a:/^\/\//.test(c)?'url("'+g+c+'")':/^\//.test(c)?'url("'+h+c+'")':/^\?/.test(c)?'url("'+i+c+'")':'url("'+f+c+'")'}),d=f.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1"),c=c.replace(RegExp("\\b(behavior:\\s*?url\\('?\"?)"+d,"gi"),"$1");d=document.createElement("style"),d.textContent=c,d.media=a.media,d.disabled=a.disabled,d.setAttribute("data-href",a.getAttribute("href")),j.insertBefore(d,a),j.removeChild(a),d.media=a.media}};try{k.open("GET",e),k.send(null)}catch(l){"undefined"!=typeof XDomainRequest&&(k=new XDomainRequest,k.onerror=k.onprogress=function(){},k.onload=d,k.open("GET",e),k.send(null))}a.setAttribute("data-inprogress","")},styleElement:function(a){if(!a.hasAttribute("data-noprefix")){var c=a.disabled;a.textContent=b.fix(a.textContent,!0,a),a.disabled=c}},styleAttribute:function(a){var c=a.getAttribute("style"),c=b.fix(c,!1,a);a.setAttribute("style",c)},process:function(){a('link[rel="stylesheet"]:not([data-inprogress])').forEach(StyleFix.link),a("style").forEach(StyleFix.styleElement),a("[style]").forEach(StyleFix.styleAttribute)},register:function(a,c){(b.fixers=b.fixers||[]).splice(void 0===c?b.fixers.length:c,0,a)},fix:function(a,c,d){for(var e=0;e<b.fixers.length;e++)a=b.fixers[e](a,c,d)||a;return a},camelCase:function(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()}).replace("-","")},deCamelCase:function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}};!function(){setTimeout(function(){a('link[rel="stylesheet"]').forEach(StyleFix.link)},10),document.addEventListener("DOMContentLoaded",StyleFix.process,!1)}()}}(),function(a){function b(a,b,d,e,f){return a=c[a],a.length&&(a=RegExp(b+"("+a.join("|")+")"+d,"gi"),f=f.replace(a,e)),f}if(window.StyleFix&&window.getComputedStyle){var c=window.PrefixFree={prefixCSS:function(a,d,e){var f=c.prefix;if(-1<c.functions.indexOf("linear-gradient")&&(a=a.replace(/(\s|:|,)(repeating-)?linear-gradient\(\s*(-?\d*\.?\d*)deg/gi,function(a,b,c,d){return b+(c||"")+"linear-gradient("+(90-d)+"deg"})),a=b("functions","(\\s|:|,)","\\s*\\(","$1"+f+"$2(",a),a=b("keywords","(\\s|:)","(\\s|;|\\}|$)","$1"+f+"$2$3",a),a=b("properties","(^|\\{|\\s|;)","\\s*:","$1"+f+"$2:",a),c.properties.length){var g=RegExp("\\b("+c.properties.join("|")+")(?!:)","gi");a=b("valueProperties","\\b",":(.+?);",function(a){return a.replace(g,f+"$1")},a)}return d&&(a=b("selectors","","\\b",c.prefixSelector,a),a=b("atrules","@","\\b","@"+f+"$1",a)),a=a.replace(RegExp("-"+f,"g"),"-"),a=a.replace(/-\*-(?=[a-z]+)/gi,c.prefix)},property:function(a){return(0<=c.properties.indexOf(a)?c.prefix:"")+a},value:function(a,d){return a=b("functions","(^|\\s|,)","\\s*\\(","$1"+c.prefix+"$2(",a),a=b("keywords","(^|\\s)","(\\s|$)","$1"+c.prefix+"$2$3",a),0<=c.valueProperties.indexOf(d)&&(a=b("properties","(^|\\s|,)","($|\\s|,)","$1"+c.prefix+"$2$3",a)),a},prefixSelector:function(a){return a.replace(/^:{1,2}/,function(a){return a+c.prefix})},prefixProperty:function(a,b){var d=c.prefix+a;return b?StyleFix.camelCase(d):d}};!function(){var a={},b=[],d=getComputedStyle(document.documentElement,null),e=document.createElement("div").style,f=function(c){if("-"===c.charAt(0)){b.push(c),c=c.split("-");var d=c[1];for(a[d]=++a[d]||1;3<c.length;)c.pop(),d=c.join("-"),StyleFix.camelCase(d)in e&&-1===b.indexOf(d)&&b.push(d)}};if(0<d.length)for(var g=0;g<d.length;g++)f(d[g]);else for(var h in d)f(StyleFix.deCamelCase(h));var i,j,g=0;for(j in a)d=a[j],d>g&&(i=j,g=d);for(c.prefix="-"+i+"-",c.Prefix=StyleFix.camelCase(c.prefix),c.properties=[],g=0;g<b.length;g++)h=b[g],0===h.indexOf(c.prefix)&&(i=h.slice(c.prefix.length),StyleFix.camelCase(i)in e||c.properties.push(i));!("Ms"!=c.Prefix||"transform"in e||"MsTransform"in e)&&"msTransform"in e&&c.properties.push("transform","transform-origin"),c.properties.sort()}(),function(){function a(a,b){return f[b]="",f[b]=a,!!f[b]}var b={"linear-gradient":{property:"backgroundImage",params:"red, teal"},calc:{property:"width",params:"1px + 5%"},element:{property:"backgroundImage",params:"#foo"},"cross-fade":{property:"backgroundImage",params:"url(a.png), url(b.png), 50%"}};b["repeating-linear-gradient"]=b["repeating-radial-gradient"]=b["radial-gradient"]=b["linear-gradient"];var d={initial:"color","zoom-in":"cursor","zoom-out":"cursor",box:"display",flexbox:"display","inline-flexbox":"display",flex:"display","inline-flex":"display",grid:"display","inline-grid":"display","max-content":"width","min-content":"width","fit-content":"width","fill-available":"width"};c.functions=[],c.keywords=[];var e,f=document.createElement("div").style;for(e in b){var g=b[e],h=g.property,g=e+"("+g.params+")";!a(g,h)&&a(c.prefix+g,h)&&c.functions.push(e)}for(var i in d)h=d[i],!a(i,h)&&a(c.prefix+i,h)&&c.keywords.push(i)}(),function(){function b(a){return g.textContent=a+"{}",!!g.sheet.cssRules.length}var d={":read-only":null,":read-write":null,":any-link":null,"::selection":null},e={keyframes:"name",viewport:null,document:'regexp(".")'};c.selectors=[],c.atrules=[];var f,g=a.appendChild(document.createElement("style"));for(f in d){var h=f+(d[f]?"("+d[f]+")":"");!b(h)&&b(c.prefixSelector(h))&&c.selectors.push(f)}for(var i in e)h=i+" "+(e[i]||""),!b("@"+h)&&b("@"+c.prefix+h)&&c.atrules.push(i);a.removeChild(g)}(),c.valueProperties=["transition","transition-property"],a.className+=" "+c.prefix,StyleFix.register(c.prefixCSS)}}(document.documentElement),define("prefixfree",function(){});var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define("fastclick",[],function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("lazyloading",["$"],function(){$.fn.picLazyLoad=function(a,b){function c(){d.each(function(){var a=$(this);if(a.is("img")){if(a.attr("data-original")){var c=a.offset().top;c-b.threshold<=f+e&&(a.attr("src",a.attr("data-original")),a.removeAttr("data-original"))}}else if(a.attr("data-original")){"none"==a.css("background-image")&&a.css("background-image","url("+b.placeholder+")");var c=a.offset().top;c-b.threshold<=f+e&&(a.css("background-image","url("+a.attr("data-original")+")"),a.removeAttr("data-original"))}})}var d=$(this),e=0,f=$(window).height();b=$.extend({threshold:0,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},b||{}),c(),a.on("scroll",function(){e=$(window).scrollTop(),c()})}}),!function(a,b){"function"==typeof define&&define.amd?define("photoswipe",b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&8>g&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(4.4>i&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;4>n;n++){c=m[n];for(var o=0;3>o;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit",alwaysFadeIn:!1};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la=function(){return{x:0,y:0}},ma=la(),na=la(),oa=la(),pa={},qa=0,ra={},sa=la(),ta=0,ua=!0,va=[],wa={},xa=!1,ya=function(a,b){e.extend(f,b.publicMethods),va.push(a)},za=function(a){var b=_b();return a>b-1?a-b:0>a?b+a:a},Aa={},Ba=function(a,b){return Aa[a]||(Aa[a]=[]),Aa[a].push(b)},Ca=function(a){var b=Aa[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Da=function(){return(new Date).getTime()},Ea=function(a){ia=a,f.bg.style.opacity=a*i.bgOpacity},Fa=function(a,b,c,d,e){(!xa||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[E]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Ga=function(a){da&&(a&&(s>f.currItem.fitRatio?xa||(lc(f.currItem,!1,!0),xa=!0):xa&&(lc(f.currItem),xa=!1)),Fa(da,oa.x,oa.y,s))},Ha=function(a){a.container&&Fa(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ia=function(a,b){b[E]=u+a+"px, 0px"+v},Ja=function(a,b){if(!i.loop&&b){var c=m+(sa.x*qa-a)/sa.x,d=Math.round(a-sb.x);(0>c&&d>0||c>=_b()-1&&0>d)&&(a=sb.x+d*i.mainScrollEndFriction)}sb.x=a,Ia(a,n)},Ka=function(a,b){var c=tb[a]-ra[a];return na[a]+ma[a]+c-c*(b/t)},La=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Ma=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Na=null,Oa=function(){Na&&(e.unbind(document,"mousemove",Oa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Ca("mouseUsed")),Na=setTimeout(function(){Na=null},100)},Pa=function(){e.bind(document,"keydown",f),N.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",Oa),e.bind(window,"resize scroll",f),Ca("bindEvents")},Qa=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Oa),N.transform&&e.unbind(f.scrollWrap,"click",f),U&&e.unbind(window,p,f),Ca("unbindEvents")},Ra=function(a,b){var c=hc(f.currItem,pa,a);return b&&(ca=c),c},Sa=function(a){return a||(a=f.currItem),a.initialZoomLevel},Ta=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},Ua=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Ka(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]?(c[a]=b.max[a],!0):!1)},Va=function(){if(E){var b=N.perspective&&!G;return u="translate"+(b?"3d(":"("),void(v=N.perspective?", 0px)":")")}E="left",e.addClass(a,"pswp--ie"),Ia=function(a,b){b.left=a+"px"},Ha=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ga=function(){if(da){var a=da,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=oa.x+"px",a.top=oa.y+"px"}}},Wa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Xa=function(a){a&&(X||W||ea||S)&&(a.preventDefault(),a.stopPropagation())},Ya=function(){f.setScrollOffset(0,e.getScrollY())},Za={},$a=0,_a=function(a){Za[a]&&(Za[a].raf&&I(Za[a].raf),$a--,delete Za[a])},ab=function(a){Za[a]&&_a(a),Za[a]||($a++,Za[a]={})},bb=function(){for(var a in Za)Za.hasOwnProperty(a)&&_a(a)},cb=function(a,b,c,d,e,f,g){var h,i=Da();ab(a);var j=function(){if(Za[a]){if(h=Da()-i,h>=d)return _a(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),Za[a].raf=H(j)}};j()},db={shout:Ca,listen:Ba,viewportSize:pa,options:i,isMainScrollAnimating:function(){return ea},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return U},isZooming:function(){return _},setScrollOffset:function(a,b){ra.x=a,M=ra.y=b,Ca("updateScrollOffset",ra)},applyZoomPan:function(a,b,c,d){oa.x=b,oa.y=c,s=a,Ga(d)},init:function(){if(!j&&!k){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),J=a.className,j=!0,N=e.detectFeatures(),H=N.raf,I=N.caf,E=N.transform,L=N.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),n=f.container.style,f.itemHolders=y=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],y[0].el.style.display=y[2].el.style.display="none",Va(),r={resize:f.updateSize,scroll:Ya,keydown:Wa,click:Xa};var d=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<va.length;c++)f["init"+va[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Ca("firstUpdate"),m=m||i.index||0,(isNaN(m)||0>m||m>=_b())&&(m=0),f.currItem=$b(m),(N.isOldIOSPhone||N.isOldAndroid)&&(ua=!1),a.setAttribute("aria-hidden","false"),i.modal&&(ua?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===M&&(Ca("initialLayout"),M=K=e.getScrollY());var l="pswp--open ";for(i.mainClass&&(l+=i.mainClass+" "),i.showHideOpacity&&(l+="pswp--animate_opacity "),l+=G?"pswp--touch":"pswp--notouch",l+=N.animationName?" pswp--css_animation":"",l+=N.svg?" pswp--svg":"",e.addClass(a,l),f.updateSize(),o=-1,ta=null,c=0;h>c;c++)Ia((c+o)*sa.x,y[c].el.style);L||e.bind(f.scrollWrap,q,f),Ba("initialZoomInEnd",function(){f.setContent(y[0],m-1),f.setContent(y[2],m+1),y[0].el.style.display=y[2].el.style.display="block",i.focus&&a.focus(),Pa()}),f.setContent(y[1],m),f.updateCurrItem(),Ca("afterInit"),ua||(w=setInterval(function(){$a||U||_||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Ca("close"),Qa(),bc(f.currItem,null,!0,f.destroy))},destroy:function(){Ca("destroy"),Wb&&clearTimeout(Wb),a.setAttribute("aria-hidden","true"),a.className=J,w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),yb(),bb(),Aa=null},panTo:function(a,b,c){c||(a>ca.min.x?a=ca.min.x:a<ca.max.x&&(a=ca.max.x),b>ca.min.y?b=ca.min.y:b<ca.max.y&&(b=ca.max.y)),oa.x=a,oa.y=b,Ga()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=za(a);var b=a-m;ta=b,m=a,f.currItem=$b(m),qa-=b,Ja(sa.x*qa),bb(),ea=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrZoomItem:function(a){if(a&&Ca("beforeChange",0),y[1].el.children.length){var b=y[1].el.children[0];da=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else da=null;ca=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,oa.x=ca.center.x,oa.y=ca.center.y,a&&Ca("afterChange")},invalidateCurrItems:function(){x=!0;for(var a=0;h>a;a++)y[a].item&&(y[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ta){var b,c=Math.abs(ta);if(!(a&&2>c)){f.currItem=$b(m),xa=!1,Ca("beforeChange",ta),c>=h&&(o+=ta+(ta>0?-h:h),c=h);for(var d=0;c>d;d++)ta>0?(b=y.shift(),y[h-1]=b,o++,Ia((o+2)*sa.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=y.pop(),y.unshift(b),o--,Ia(o*sa.x,b.el.style),f.setContent(b,m+c-d-1-1));if(da&&1===Math.abs(ta)){var e=$b(z);e.initialZoomLevel!==s&&(hc(e,pa),lc(e),Ha(e))}ta=0,f.updateCurrZoomItem(),z=m,Ca("afterChange")}}},updateSize:function(b){if(!ua&&i.modal){var c=e.getScrollY();if(M!==c&&(a.style.top=c+"px",M=c),!b&&wa.x===window.innerWidth&&wa.y===window.innerHeight)return;wa.x=window.innerWidth,wa.y=window.innerHeight,a.style.height=wa.y+"px"}if(pa.x=f.scrollWrap.clientWidth,pa.y=f.scrollWrap.clientHeight,Ya(),sa.x=pa.x+Math.round(pa.x*i.spacing),sa.y=pa.y,Ja(sa.x*qa),Ca("beforeResize"),void 0!==o){for(var d,g,j,k=0;h>k;k++)d=y[k],Ia((k+o)*sa.x,d.el.style),j=m+k-1,i.loop&&_b()>2&&(j=za(j)),g=$b(j),g&&(x||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):-1===d.index&&j>=0&&f.setContent(d,j),g&&g.container&&(hc(g,pa),lc(g),Ha(g));x=!1}t=s=f.currItem.initialZoomLevel,ca=f.currItem.bounds,ca&&(oa.x=ca.center.x,oa.y=ca.center.y,Ga(!0)),Ca("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,tb.x=Math.abs(b.x)-oa.x,tb.y=Math.abs(b.y)-oa.y,La(na,oa));var g=Ra(a,!1),h={};Ua("x",g,h,a),Ua("y",g,h,a);var i=s,j={x:oa.x,y:oa.y};Ma(h);var k=function(b){1===b?(s=a,oa.x=h.x,oa.y=h.y):(s=(a-i)*b+i,oa.x=(h.x-j.x)*b+j.x,oa.y=(h.y-j.y)*b+j.y),f&&f(b),Ga(1===b)};c?cb("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},eb=30,fb=10,gb={},hb={},ib={},jb={},kb={},lb=[],mb={},nb=[],ob={},pb=0,qb=la(),rb=0,sb=la(),tb=la(),ub=la(),vb=function(a,b){return a.x===b.x&&a.y===b.y},wb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},xb=function(a,b){return ob.x=Math.abs(a.x-b.x),ob.y=Math.abs(a.y-b.y),Math.sqrt(ob.x*ob.x+ob.y*ob.y)},yb=function(){Y&&(I(Y),Y=null)},zb=function(){U&&(Y=H(zb),Pb())},Ab=function(){return"fit"!==i.scaleMode||s!==f.currItem.initialZoomLevel},Bb=function(a,b){return a?a.className&&a.className.indexOf("pswp__scroll-wrap")>-1?!1:b(a)?a:Bb(a.parentNode,b):!1},Cb={},Db=function(a,b){return Cb.prevent=!Bb(a.target,i.isClickableElement),Ca("preventDragEvent",a,b,Cb),Cb.prevent},Eb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Fb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Gb=function(a,b,c){if(a-P>50){var d=nb.length>2?nb.shift():{};d.x=b,d.y=c,nb.push(d),P=a}},Hb=function(){var a=oa.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(pa.y/2))},Ib={},Jb={},Kb=[],Lb=function(a){for(;Kb.length>0;)Kb.pop();return F?(ka=0,lb.forEach(function(a){0===ka?Kb[0]=a:1===ka&&(Kb[1]=a),ka++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Kb[0]=Eb(a.touches[0],Ib),a.touches.length>1&&(Kb[1]=Eb(a.touches[1],Jb))):(Ib.x=a.pageX,Ib.y=a.pageY,Ib.id="",Kb[0]=Ib),Kb},Mb=function(a,b){var c,d,e,g,h=0,j=oa[a]+b[a],k=b[a]>0,l=sb.x+b.x,m=sb.x-mb.x;return c=j>ca.min[a]||j<ca.max[a]?i.panEndFriction:1,j=oa[a]+b[a]*c,!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(da?"h"!==fa||"x"!==a||W||(k?(j>ca.min[a]&&(c=i.panEndFriction,h=ca.min[a]-j,d=ca.min[a]-na[a]),(0>=d||0>m)&&_b()>1?(g=l,0>m&&l>mb.x&&(g=mb.x)):ca.min.x!==ca.max.x&&(e=j)):(j<ca.max[a]&&(c=i.panEndFriction,h=j-ca.max[a],d=na[a]-ca.max[a]),(0>=d||m>0)&&_b()>1?(g=l,m>0&&l<mb.x&&(g=mb.x)):ca.min.x!==ca.max.x&&(e=j))):g=l,"x"!==a)?void(ea||Z||s>f.currItem.fitRatio&&(oa[a]+=b[a]*c)):(void 0!==g&&(Ja(g,!0),Z=g===mb.x?!1:!0),ca.min.x!==ca.max.x&&(void 0!==e?oa.x=e:Z||(oa.x+=b.x*c)),void 0!==g)},Nb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(Zb)return void a.preventDefault();if(!T||"mousedown"!==a.type){if(Db(a,!0)&&a.preventDefault(),Ca("pointerDown"),F){var b=e.arraySearch(lb,a.pointerId,"id");0>b&&(b=lb.length),lb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Lb(a),d=c.length;$=null,bb(),U&&1!==d||(U=ga=!0,e.bind(window,p,f),R=ja=ha=S=Z=X=V=W=!1,fa=null,Ca("firstTouchStart",c),La(na,oa),ma.x=ma.y=0,La(jb,c[0]),La(kb,jb),mb.x=sa.x*qa,nb=[{x:jb.x,y:jb.y}],P=O=Da(),Ra(s,!0),yb(),zb()),!_&&d>1&&!ea&&!Z&&(t=s,W=!1,_=V=!0,ma.y=ma.x=0,La(na,oa),La(gb,c[0]),La(hb,c[1]),Fb(gb,hb,ub),tb.x=Math.abs(ub.x)-oa.x,tb.y=Math.abs(ub.y)-oa.y,aa=ba=xb(gb,hb))}}},Ob=function(a){if(a.preventDefault(),F){var b=e.arraySearch(lb,a.pointerId,"id");if(b>-1){var c=lb[b];c.x=a.pageX,c.y=a.pageY}}if(U){var d=Lb(a);if(fa||X||_)$=d;else if(sb.x!==sa.x*qa)fa="h";else{var f=Math.abs(d[0].x-jb.x)-Math.abs(d[0].y-jb.y);Math.abs(f)>=fb&&(fa=f>0?"h":"v",$=d)}}},Pb=function(){if($){var a=$.length;if(0!==a)if(La(gb,$[0]),ib.x=gb.x-jb.x,ib.y=gb.y-jb.y,_&&a>1){if(jb.x=gb.x,jb.y=gb.y,!ib.x&&!ib.y&&vb($[1],hb))return;La(hb,$[1]),W||(W=!0,Ca("zoomGestureStarted"));var b=xb(gb,hb),c=Ub(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ja=!0);var d=1,e=Sa(),g=Ta();if(e>c)if(i.pinchToClose&&!ja&&t<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);Ea(j),Ca("onPinchClose",j),ha=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),
c=g+d*e);0>d&&(d=0),aa=b,Fb(gb,hb,qb),ma.x+=qb.x-ub.x,ma.y+=qb.y-ub.y,La(ub,qb),oa.x=Ka("x",c),oa.y=Ka("y",c),R=c>s,s=c,Ga()}else{if(!fa)return;if(ga&&(ga=!1,Math.abs(ib.x)>=fb&&(ib.x-=$[0].x-kb.x),Math.abs(ib.y)>=fb&&(ib.y-=$[0].y-kb.y)),jb.x=gb.x,jb.y=gb.y,0===ib.x&&0===ib.y)return;if("v"===fa&&i.closeOnVerticalDrag&&!Ab()){ma.y+=ib.y,oa.y+=ib.y;var k=Hb();return S=!0,Ca("onVerticalDrag",k),Ea(k),void Ga()}Gb(Da(),gb.x,gb.y),X=!0,ca=f.currItem.bounds;var l=Mb("x",ib);l||(Mb("y",ib),Ma(oa),Ga())}}},Qb=function(a){if(N.isOldAndroid){if(T&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(T),T=setTimeout(function(){T=0},600))}Ca("pointerUp"),Db(a,!1)&&a.preventDefault();var b;if(F){var c=e.arraySearch(lb,a.pointerId,"id");if(c>-1)if(b=lb.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Lb(a),j=h.length;if("mouseup"===a.type&&(j=0),2===j)return $=null,!0;1===j&&La(kb,h[0]),0!==j||fa||ea||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Ca("touchRelease",a,b));var k=-1;if(0===j&&(U=!1,e.unbind(window,p,f),yb(),_?k=0:-1!==rb&&(k=Da()-rb)),rb=1===j?Da():-1,g=-1!==k&&150>k?"zoom":"swipe",_&&2>j&&(_=!1,1===j&&(g="zoomPointerUp"),Ca("zoomGestureEnded")),$=null,X||W||ea||S)if(bb(),Q||(Q=Rb()),Q.calculateSwipeSpeed("x"),S){var l=Hb();if(l<i.verticalDragRange)f.close();else{var m=oa.y,n=ia;cb("verticalDrag",0,1,300,e.easing.cubic.out,function(a){oa.y=(f.currItem.initialPosition.y-m)*a+m,Ea((1-n)*a+n),Ga()}),Ca("onVerticalDrag",1)}}else{if((Z||ea)&&0===j){var o=Tb(g,Q);if(o)return;g="zoomPointerUp"}if(!ea)return"swipe"!==g?void Vb():void(!Z&&s>f.currItem.fitRatio&&Sb(Q))}},Rb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){nb.length>1?(a=Da()-P+50,b=nb[nb.length-2][d]):(a=Da()-O,b=kb[d]),c.lastFlickOffset[d]=jb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(oa[a]>ca.min[a]?c.backAnimDestination[a]=ca.min[a]:oa[a]<ca.max[a]&&(c.backAnimDestination[a]=ca.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,cb("bounceZoomPan"+a,oa[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){oa[a]=b,Ga()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,oa[a]+=c.distanceOffset[a])},panAnimLoop:function(){return Za.zoomPan&&(Za.zoomPan.raf=H(c.panAnimLoop),c.now=Da(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ga(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05)?(oa.x=Math.round(oa.x),oa.y=Math.round(oa.y),Ga(),void _a("zoomPan")):void 0}};return c},Sb=function(a){return a.calculateSwipeSpeed("y"),ca=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(ab("zoomPan"),a.lastNow=Da(),void a.panAnimLoop())},Tb=function(a,b){var c;ea||(pb=m);var d;if("swipe"===a){var g=jb.x-kb.x,h=b.lastFlickDist.x<10;g>eb&&(h||b.lastFlickOffset.x>20)?d=-1:-eb>g&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(m+=d,0>m?(m=i.loop?_b()-1:0,j=!0):m>=_b()&&(m=i.loop?0:_b()-1,j=!0),(!j||i.loop)&&(ta+=d,qa-=d,c=!0));var k,l=sa.x*qa,n=Math.abs(l-sb.x);return c||l>sb.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,pb===m&&(c=!1),ea=!0,Ca("mainScrollAnimStart"),cb("mainScroll",sb.x,l,k,e.easing.cubic.out,Ja,function(){bb(),ea=!1,pb=-1,(c||pb!==m)&&f.updateCurrItem(),Ca("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Ub=function(a){return 1/ba*a*t},Vb=function(){var a=s,b=Sa(),c=Ta();b>s?a=b:s>c&&(a=c);var d,g=1,h=ia;return ha&&!R&&!ja&&b>s?(f.close(),!0):(ha&&(d=function(a){Ea((g-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};ya("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){A=a+b,B=a+c,C=a+d,D=e?a+e:""};F=N.pointerEvent,F&&N.touch&&(N.touch=!1),F?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):N.touch?(a("touch","start","move","end","cancel"),G=!0):a("mouse","down","move","up"),p=B+" "+C+" "+D,q=A,F&&!G&&(G=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=G,r[A]=Nb,r[B]=Ob,r[C]=Qb,D&&(r[D]=r[C]),N.touch&&(q+=" mousedown",p+=" mousemove mouseup",r.mousedown=r[A],r.mousemove=r[B],r.mouseup=r[C]),G||(i.allowPanToNext=!1)}}});var Wb,Xb,Yb,Zb,$b,_b,ac,bc=function(b,c,d,g){Wb&&clearTimeout(Wb),Zb=!0,Yb=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){_a("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Ea(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Ca("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),Zb=!1};if(!j||!h||void 0===h.x){var n=function(){Ca("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,La(oa,b.initialPosition),Ga(),a.style.opacity=d?0:1,Ea(1),k()};return void n()}var o=function(){var c=l,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=h.w/b.w,oa.x=h.x,oa.y=h.y-K,f[g?"template":"bg"].style.opacity=.001,Ga()),ab("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Wb=setTimeout(function(){if(Ca("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:oa.x,y:oa.y},l=s,m=ia,n=function(b){1===b?(s=f,oa.x=h.x,oa.y=h.y-M):(s=(f-l)*b+l,oa.x=(h.x-i.x)*b+i.x,oa.y=(h.y-M-i.y)*b+i.y),Ga(),g?a.style.opacity=1-b:Ea(m-b*m)};c?cb("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Wb=setTimeout(k,j+20))}else s=b.initialZoomLevel,La(oa,b.initialPosition),Ga(),Ea(1),g?a.style.opacity=1:Ea(1),Wb=setTimeout(k,j+20)},d?25:90)};o()},cc={},dc=[],ec={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xb.length}},fc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},gc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((cc.x-b)/2),d.center.y=Math.round((cc.y-c)/2)+a.vGap.top,d.max.x=b>cc.x?Math.round(cc.x-b):d.center.x,d.max.y=c>cc.y?Math.round(cc.y-c)+a.vGap.top:d.center.y,d.min.x=b>cc.x?0:d.center.x,d.min.y=c>cc.y?a.vGap.top:d.center.y},hc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Ca("parseVerticalMargin",a)),cc.x=b.x,cc.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=cc.x/a.w,f=cc.y/a.h;a.fitRatio=f>e?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=fc())}if(!c)return;return gc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=fc(),a.initialPosition=a.bounds.center,a.bounds},ic=function(a,b,c,d,e,f){b.loadError||d&&(b.imageAppended=!0,lc(b,d),c.appendChild(d),f&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},jc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},kc=function(a,b){return a.src&&a.loadError&&a.container?(b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0):void 0},lc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},mc=function(){if(dc.length){for(var a,b=0;b<dc.length;b++)a=dc[b],a.holder.index===a.index&&ic(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);dc=[]}};ya("Controller",{publicMethods:{lazyLoadItem:function(a){a=za(a);var b=$b(a);!b||b.loaded||b.loading||(Ca("gettingData",a,b),b.src&&jc(b))},initController:function(){e.extend(i,ec,!0),f.items=Xb=c,$b=f.getItemAt,_b=i.getNumItemsFn,ac=i.loop,_b()<3&&(i.loop=!1),Ba("beforeChange",function(a){var b,c=i.preload,d=null===a?!0:a>0,e=Math.min(c[0],_b()),g=Math.min(c[1],_b());for(b=1;(d?g:e)>=b;b++)f.lazyLoadItem(m+b);for(b=1;(d?e:g)>=b;b++)f.lazyLoadItem(m-b)}),Ba("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Ba("mainScrollAnimComplete",mc),Ba("initialZoomInEnd",mc),Ba("destroy",function(){for(var a,b=0;b<Xb.length;b++)a=Xb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);dc=null})},getItemAt:function(a){return a>=0&&void 0!==Xb[a]?Xb[a]:!1},allowProgressiveImg:function(){return i.forceProgressiveLoading||!G||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=za(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Ca("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),kc(g),hc(g,pa),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=g.src,lc(g,d),ic(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(j){if(a&&a.index===b){if(kc(c,!0))return c.loadComplete=c.img=null,hc(c,pa),Ha(c),void(a.index===m&&f.updateCurrZoomItem());c.imageAppended?!Zb&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):N.transform&&(ea||Zb)?dc.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):ic(b,c,h,c.img,ea||Zb,!0)}c.loadComplete=null,c.img=null,Ca("imageLoadComplete",b,c)}},e.features.transform){var k="pswp__img pswp__img--placeholder";k+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(k,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),lc(g,l),h.appendChild(l),g.placeholder=l}g.loading||jc(g),f.allowProgressiveImg()&&(!Yb&&N.transform?dc.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):ic(b,g,h,g.img,!0,!0))}Yb||b!==m?Ha(g):(da=h.style,bc(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var nc,oc={},pc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};ya("Tap",{publicMethods:{initTap:function(){Ba("firstTouchStart",f.onTapStart),Ba("touchRelease",f.onTapRelease),Ba("destroy",function(){oc={},nc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(nc),nc=null)},onTapRelease:function(a,b){if(b&&!X&&!V&&!$a){var c=b;if(nc&&(clearTimeout(nc),nc=null,wb(c,oc)))return void Ca("doubleTap",c);if("mouse"===b.type)return void pc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void pc(a,b);La(oc,c),nc=setTimeout(function(){pc(a,b),nc=null},300)}}}});var qc;ya("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(G?Ba("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){qc={};var c="wheel mousewheel DOMMouseScroll";Ba("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Ba("unbindEvents",function(){qc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),1>s?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Ba("resize",g),Ba("afterChange",g),Ba("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Ba("pointerUp",h),b||g()},handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return i.modal&&(!i.closeOnScroll||$a||U?a.preventDefault():E&&Math.abs(a.deltaY)>2&&(l=!0,f.close())),!0;if(a.stopPropagation(),qc.x=0,"deltaX"in a)1===a.deltaMode?(qc.x=18*a.deltaX,qc.y=18*a.deltaY):(qc.x=a.deltaX,qc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(qc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?qc.y=-.16*a.wheelDeltaY:qc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;qc.y=a.detail}Ra(s,!0);var b=oa.x-qc.x,c=oa.y-qc.y;(i.modal||b<=ca.min.x&&b>=ca.max.x&&c<=ca.min.y&&c>=ca.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:pa.x/2+ra.x,y:pa.y/2+ra.y};var c=i.getDoubleTapZoom(!0,f.currItem),d=s===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var rc,sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc={history:!0,galleryUID:1},Ec=function(){return Bc.hash.substring(1)},Fc=function(){rc&&clearTimeout(rc),tc&&clearTimeout(tc)},Gc=function(){var a=Ec(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(i.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Xb.length;c++)if(Xb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Hc=function(){if(tc&&clearTimeout(tc),$a||U)return void(tc=setTimeout(Hc,500));uc?clearTimeout(sc):uc=!0;var a=m+1,b=$b(m);b.hasOwnProperty("pid")&&(a=b.pid);var c=xc+"&gid="+i.galleryUID+"&pid="+a;yc||-1===Bc.hash.indexOf(c)&&(Ac=!0);var d=Bc.href.split("#")[0]+"#"+c;Cc?"#"+c!==window.location.hash&&history[yc?"replaceState":"pushState"]("",document.title,d):yc?Bc.replace(d):Bc.hash=c,yc=!0,sc=setTimeout(function(){uc=!1},60)};ya("History",{publicMethods:{initHistory:function(){if(e.extend(i,Dc,!0),i.history){Bc=window.location,Ac=!1,zc=!1,yc=!1,xc=Ec(),Cc="pushState"in history,xc.indexOf("gid=")>-1&&(xc=xc.split("&gid=")[0],xc=xc.split("?gid=")[0]),Ba("afterChange",f.updateURL),Ba("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){wc=!0,zc||(Ac?history.back():xc?Bc.hash=xc:Cc?history.pushState("",document.title,Bc.pathname+Bc.search):Bc.hash=""),Fc()};Ba("unbindEvents",function(){l&&a()}),Ba("destroy",function(){wc||a()}),Ba("firstUpdate",function(){m=Gc().pid});var b=xc.indexOf("pid=");b>-1&&(xc=xc.substring(0,b),"&"===xc.slice(-1)&&(xc=xc.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Ec()===xc?(zc=!0,void f.close()):void(uc||(vc=!0,f.goTo(Gc().pid),vc=!1))},updateURL:function(){Fc(),vc||(yc?rc=setTimeout(Hc,800):Hc())}}}),e.extend(f,db)};return a}),!function(a,b){"function"==typeof define&&define.amd?define("photoswipeui",b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / "},A=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&K();for(var c,d,e=a.target||a.srcElement,f=e.className,g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>1200},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),c.href?c.hasAttribute("download")?!0:(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1):!1},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){J++,2===J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&.95>a?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&.9>b?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){a=!1,a&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;f>g;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.className&&a.type.indexOf("mouse")>-1&&(d.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,y||F(),D()},v.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType){if(I(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a}),define("myPhotoSwipe",["photoswipe","photoswipeui","$"],function(a,b){var c=function(a,b){this.extend(b),$(document).on("click",a,$.proxy(this,"onThumbnailsClick")),this.appendModalDom()};c.prototype={extend:function(a){if(this.config=d,a)for(var b in a){var c=a[b];c&&(this.config[b]=c)}},appendModalDom:function(){if(!($(".pswp").length>0)){var a="";this.config.bgFilter&&(a='<div class="filter"><img class="filter-img" src="" alt=""></div>');var b='<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg">'+a+'</div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>';$("body").append(b)}},parseThumbnailElements:function(a){for(var b,c,d,e,f=a.childNodes,g=f.length,h=[],i=0;g>i;i++)b=f[i],1===b.nodeType&&(c=b.children[0],void 0!=c&&(d=c.getAttribute("data-size").split("x"),e={src:c.getAttribute("href"),w:parseInt(d[0],10),h:parseInt(d[1],10)},b.children.length>1&&(e.title=b.children[1].innerHTML),c.children.length>0&&(e.msrc=c.children[0].getAttribute("src")),e.el=b,h.push(e)));return h},closest:function e(a,b){return a&&(b(a)?a:e(a.parentNode,b))},onThumbnailsClick:function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,c=this.closest(b,function(a){return a.tagName&&"LI"===a.tagName.toUpperCase()});if(c){for(var d,e=c.parentNode,f=c.parentNode.childNodes,g=f.length,h=0,i=0;g>i;i++)if(1===f[i].nodeType){if(f[i]===c){d=h;break}h++}return d>=0&&this.openPhotoSwipe(d,e),!1}},photoswipeParseHash:function(){var a=window.location.hash.substring(1),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b},openPhotoSwipe:function(c,d,e,f){var g,h,i=document.querySelectorAll(".pswp")[0];if(h=this.parseThumbnailElements(d),g={galleryUID:0,getThumbBoundsFn:function(a){var b=h[a].el.getElementsByTagName("img")[0],c=window.pageYOffset||document.documentElement.scrollTop,d=b.getBoundingClientRect();return{x:d.left,y:d.top+c,w:d.width}}},f)if(g.galleryPIDs){for(var j=0;j<h.length;j++)if(h[j].pid==c){g.index=j;break}}else g.index=parseInt(c,10)-1;else g.index=parseInt(c,10);isNaN(g.index)||(e&&(g.showAnimationDuration=0),this.gallery=new a(i,b,h,g),this.gallery.init(),this.gallery.listen("afterChange",$.proxy(this,"afterChange")),this.afterChange())},imageLoadComplete:function(a,b){this.config.bgFilter&&$(".pswp__bg .filter img").attr("src",b.src)},afterChange:function(){this.config.bgFilter&&$(".pswp__bg .filter img").attr("src",this.gallery.currItem.src)}};var d={bgFilter:!1};return c}),define("base",["$","fastclick"],function(){FastClick.attach(document.body);var a=function(a){var b=window.location.href,c=/(\d+)\.(\d+)\.(\d+)\.(\d+)/;this.isFromApp=b.indexOf("hisihi-app")>=0,this.isLocal=!1,(c.test(b)||b.indexOf("localhost")>=0)&&(this.isLocal=!0),this.deviceType=this.operationType(),this.staticUserNameStr="jg2rw2xVjyrgbrZp",this.userInfo={token:"",session_id:null,name:this.staticUserNameStr},this.statisticToken,this.timeOutFlag=!1,this.extentSetting(a),this._initTimeFormat(),this._initStringExtentFn(),this._addTip(),this._addLoadingImg(),this._addDownloadBar(a)};a.prototype={extentSetting:function(a){if(this.config=b,a)for(var c in b){var d=a[c];"undefined"!=d&&("object"==typeof d?this.config[c]=this.extentSettingSub(this.config[c],d):this.config[c]=d)}},extentSettingSub:function(a,b){for(var c in a)"undefined"!=typeof b[c]&&(a[c]=b[c]);return a},getUserInfo:function(a,b){var c="",d=this;if(this.deviceType.mobile)if(this.deviceType.android?"undefined"!=typeof AppFunction&&(c=AppFunction.getUser()):this.deviceType.ios&&"undefined"!=typeof getUser_iOS&&(c=getUser_iOS()),""!=c)this.userInfo=JSON.parse(c),this.userInfo.token=this.getBase64encode(this.userInfo.token),a&&a.call(d);else{if(0==b||void 0===b){var e={url:this.baseUrl+"user/login",type:"get",async:!1,paraData:{username:"13554154325",password:"12345678",type:3,client:4},sCallback:function(b){d.userInfo=b,a&&a.call(d)},eCallback:function(){a&&a.call(d)}};return void(d.isLocal?this.getDataAsync(e):a&&a.call(d))}var f={account:"18140662282",secret:"954957945",type:200};1==b&&(f={account:d.staticUserNameStr,secret:"VbkzpPlZ6H4OvqJW",type:100}),d.getBasicToken({account:f.account,secret:f.secret,type:f.type},!1,function(b){d.userInfo.token=b,d.userInfo.name=f.account,a&&a.call(d,d.userInfo),f.account==d.staticUserNameStr&&(d.statisticToken=b)})}else a&&a.call(d)},getDataAsync:function(a){if(a.type||(a.type="post"),void 0==a.async&&(a.async=!0),a.url&&a.url)var b=$.ajax({url:a.url,async:a.async,type:a.type,data:a.paraData,timeout:1e4,contentType:"application/json",beforeSend:function(b){a.beforeSend&&a.beforeSend(b)},complete:function(c,d){if("success"==d){var e=c.responseText,f={};if(e?f=JSON.parse(e):f.status=!1,f.success)a.sCallback(JSON.parse(c.responseText));else{var g=f.message,h=f.error_code;g&&g.indexOf("已在其他位置登录")>=0&&(g="需要登录"),a.eCallback&&a.eCallback({code:h,txt:g})}}else"timeout"==d?(b.abort(),a.eCallback&&a.eCallback({code:"408",txt:"超时"})):(a.eCallback&&a.eCallback({code:"404",txt:"no found"}),b.abort())}})},getDataAsyncPy:function(a){a.type||(a.type="post"),void 0==a.async&&(a.async=!0);var b=$.ajax({async:a.async,url:a.url,type:a.type,data:a.paraData,timeout:1e4,contentType:"application/json",beforeSend:function(b){a.beforeSend?a.beforeSend(b):a.needToken&&b.setRequestHeader("Authorization",a.token)},complete:function(c,d){var e=c.responseText,f={};e?f=JSON.parse(c.responseText):f.code=0,"success"==d?a.sCallback(f):"timeout"==d?(b.abort(),a.eCallback&&a.eCallback({code:"408",txt:"超时"})):(f||(f={code:"404",
txt:"no found"}),a.eCallback&&a.eCallback(f))}})},getBasicToken:function(a,b,c){var d=this,e={async:b,url:window.hisihiUrlObj.api_url+"/v1/token",type:"post",paraData:JSON.stringify({account:a.account,secret:a.secret,type:a.type}),sCallback:function(a){var b=d.getBase64encode(a.token);c&&c.call(d,b)},eCallback:function(a){d.showTips(a.txt)}};this.getDataAsyncPy(e)},updateStatisticsNum:function(a){var b=this.statisticToken,c=this,d={url:window.hisihiUrlObj.statis_url+"bootstrap",paraData:JSON.stringify({data:[{type:a}]}),needToken:!0,token:b,sCallback:function(){},eCallback:function(){}};b?c.getDataAsyncPy(d):this.getBasicToken({account:this.staticUserNameStr,secret:"VbkzpPlZ6H4OvqJW",type:100},!0,function(a){d.token=a,c.getDataAsyncPy(d)})},substrLongStr:function(a,b){return a.length>b&&(a=a.substr(0,parseInt(b-1))+"…"),a},getTimeFromTimestamp:function(a,b){return b||(b="yyyy-MM-dd"),new Date(1e3*parseFloat(a)).format(b)},_initTimeFormat:function(){Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a}},_initStringExtentFn:function(){String.prototype.substrLongStr=function(){var a=this;return this.length>len&&(a=this.substr(0,parseInt(len-1))+"…"),a},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}},getDiffTime:function(a,b){if(a){a=new Date(1e3*parseFloat(a));var c=6e4,d=60*c,e=24*d,f=new Date,g=f-a,h="";if(0>g)return h;var i=g/(7*e),j=g/e,k=g/d,l=g/c;if(i>=1){var m="MM-dd hh:mm";return b&&(m="yyyy-MM-dd hh:mm"),a.format(m)}if(1==j||24>k&&a.getDate()!=f.getDate())return h="昨天"+a.format("hh:mm");if(j>1){var m="MM-dd hh:mm";return b&&(m="yyyy-MM-dd hh:mm"),a.format(m)}return h=k>=1?parseInt(k)+"小时前":l>=1?parseInt(l)+"分钟前":"刚刚"}return""},operationType:function(){var a=navigator.userAgent;navigator.appVersion;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&-1==a.indexOf("KHTML"),mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1||a.indexOf("Linux")>-1,iPhone:a.indexOf("iPhone")>-1,iPad:a.indexOf("iPad")>-1,webApp:-1==a.indexOf("Safari")}},writeInfoToStorage:function(a){var b=window.localStorage;b.setItem(a.key,a.val)},getInfoFromStorage:function(a){var b=window.localStorage,c=b.getItem(a);return c?c:!1},_addLoadingImg:function(){if(!($("#loading-data").length>0)){var a='<div id="loading-data"><img class="loding-img"  src="http://pic.hisihi.com/2016-05-11/1462946331132960.png"></div>';$("body").append(a)}},controlLoadingBox:function(a){var b=$("#loading-data");a?b.addClass("active").show():b.removeClass("active").hide()},_addTip:function(){if(!($("#result-tips").length>0)){var a='<div id="result-tips" class="result-tips" style="display: none;"><p></p></div>';$("body").append(a)}},showTips:function(a,b){if(!this.timeOutFlag){b=b||1500,a.indexOf("<")<0&&(a="<p>"+a+"</p>"),this.timeOutFlag=!0;var c=$("body").find(".result-tips"),d=this;c.html(a).show(),window.setTimeout(function(){c.hide().html(""),d.timeOutFlag=!1},b)}},showTipsNoHide:function(a,b){if(!this.timeOutFlag){this.timeOutFlag=!0;var c=$("body").find(".result-tips");c.find("p").text(a);b&&c.html(b),c.show()}},hideTips:function(){var a=$("body").find(".result-tips"),b=a.find("p");a.hide(),b.text(""),this.timeOutFlag=!1},getBase64encode:function(a){a+=":";var b,c,d,e,f,g,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2|(192&g)>>6),b+=h.charAt(63&g)}return"basic "+b},doLogin:function(){this.isFromApp&&(this.deviceType.android?"undefined"!=typeof AppFunction&&AppFunction.login():"undefined"!=typeof showLoginView&&showLoginView())},setFootStyle:function(a){a||(a=$(".wrapper"));var b=$("#downloadCon"),c=$(document).width(),d=120*c/750;return c>750&&(d=113),b.css({height:d+"px",opacity:1}),a.css({"margin-bottom":d+"px"}),d},_addDownloadBar:function(){var a=this.config.downloadBar;if(a.show&&!this.isFromApp){var b="bottom:0",c={"padding-bottom":a.height};a.pos||(b="top:0",c={"padding-top":a.height});var d='<div id="downloadCon-new" style="'+b+";background-color:"+a.backgroundColor+'"><img src="'+a.logo+'" class="allDownImg" /><div class="words"><div class="title"><label>'+a.title+'</label><span class="stars"><img src="'+a.starImg+'"><img src="'+a.starImg+'"><img src="'+a.starImg+'"><img src="'+a.starImg+'"><img src="'+a.starImg+'"></span></div><p>'+a.description+'</p></div><a id="download" style="background-color:'+a.btnBgColor+'" href="http://www.hisihi.com/download.php">'+a.downloadBtnWord+"</a></div>";$("body").append(d).css(c)}},scrollControl:function(a,b){a?($("html,body").removeClass("noscroll"),window.scrollTo(0,this.scrollTop)):(b=b||$("body"),this.scrollTop=b.scrollTop(),$("html,body").addClass("noscroll"))},translationCount:function(a,b){if(a=parseInt(a),b||(b=1e4),a>b){if(a/=1e4,a%1e4!=0){a=a.toString();var c=a.indexOf(".");if(c>=0){a=a.substr(0,c+2);var d=a.split(".");0==d[1]&&(a=d[0])}}a+="万"}return a}};var b={downloadBar:{show:!1,pos:1,title:"嘿设汇",description:"设计师必备，百万设计师都在用",logo:"http://pic.hisihi.com/2016-08-04/1470283879133258.png",starImg:"http://pic.hisihi.com/2016-08-04/1470283927495292.png",downloadBtnWord:"立即下载",btnBgColor:"#FF5A00",backgroundColor:"#9E9A98",height:"56px"}};return a}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("async",["exports"],b):b(a.async=a.async||{})}(this,function(a){"use strict";function b(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function c(a,c){return c=bb(void 0===c?a.length-1:c,0),function(){for(var d=arguments,e=-1,f=bb(d.length-c,0),g=Array(f);++e<f;)g[e]=d[c+e];e=-1;for(var h=Array(c+1);++e<c;)h[e]=d[e];return h[c]=g,b(a,this,h)}}function d(a){return c(function(b){var c=b.pop();a.call(this,b,c)})}function e(a){return c(function(b,c){var e=d(function(c,d){var e=this;return a(b,function(a,b){a.apply(e,c.concat([b]))},d)});return c.length?e.apply(this,c):e})}function f(a){return function(b){return null==b?void 0:b[a]}}function g(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function h(a){var b=g(a)?gb.call(a):"";return b==db||b==eb}function i(a){return"number"==typeof a&&a>-1&&a%1==0&&hb>=a}function j(a){return null!=a&&i(cb(a))&&!h(a)}function k(){}function l(a){return function(){if(null!==a){var b=a;a=null,b.apply(this,arguments)}}}function m(a){return ib&&a[ib]&&a[ib]()}function n(a,b){return function(c){return a(b(c))}}function o(a,b){return null!=a&&(mb.call(a,b)||"object"==typeof a&&b in a&&null===kb(a))}function p(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function q(a){return!!a&&"object"==typeof a}function r(a){return q(a)&&j(a)}function s(a){return r(a)&&rb.call(a,"callee")&&(!tb.call(a,"callee")||sb.call(a)==pb)}function t(a){return"string"==typeof a||!ub(a)&&q(a)&&xb.call(a)==vb}function u(a){var b=a?a.length:void 0;return i(b)&&(ub(a)||t(a)||s(a))?p(b,String):null}function v(a,b){return b=null==b?yb:b,!!b&&("number"==typeof a||zb.test(a))&&a>-1&&a%1==0&&b>a}function w(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||Ab;return a===c}function x(a){var b=w(a);if(!b&&!j(a))return ob(a);var c=u(a),d=!!c,e=c||[],f=e.length;for(var g in a)o(a,g)&&(!d||"length"!=g&&!v(g,f))&&(!b||"constructor"!=g)&&e.push(g);return e}function y(a){var b=-1,c=a.length;return function(){return++b<c?{value:a[b],key:b}:null}}function z(a){var b=-1;return function(){var c=a.next();return c.done?null:(b++,{value:c.value,key:b})}}function A(a){var b=x(a),c=-1,d=b.length;return function(){var e=b[++c];return d>c?{value:a[e],key:e}:null}}function B(a){if(j(a))return y(a);var b=m(a);return b?z(b):A(a)}function C(a){return function(){if(null===a)throw new Error("Callback was already called.");var b=a;a=null,b.apply(this,arguments)}}function D(a){return function(b,c,d){function e(a){if(i-=1,a)h=!0,d(a);else{if(h&&0>=i)return d(null);f()}}function f(){for(;a>i&&!h;){var b=g();if(null===b)return h=!0,void(0>=i&&d(null));i+=1,c(b.value,b.key,C(e))}}if(d=l(d||k),0>=a||!b)return d(null);var g=B(b),h=!1,i=0;f()}}function E(a,b,c,d){D(b)(a,c,d)}function F(a,b){return function(c,d,e){return a(c,b,d,e)}}function G(a,b,c){function d(a){a?c(a):++f===g&&c(null)}c=l(c||k);var e=0,f=0,g=a.length;for(0===g&&c(null);g>e;e++)b(a[e],e,C(d))}function H(a,b,c){var d=j(a)?G:Bb;d(a,b,c)}function I(a){return function(b,c,d){return a(H,b,c,d)}}function J(a,b,c,d){d=l(d||k),b=b||[];var e=[],f=0;a(b,function(a,b,d){var g=f++;c(a,function(a,b){e[g]=b,d(a)})},function(a){d(a,e)})}function K(a){return function(b,c,d,e){return a(D(c),b,d,e)}}function L(a){return d(function(b,c){var d;try{d=a.apply(this,b)}catch(e){return c(e)}g(d)&&"function"==typeof d.then?d.then(function(a){c(null,a)},function(a){c(a.message?a:new Error(a))}):c(null,d)})}function M(a,b){for(var c=-1,d=a?a.length:0;++c<d&&b(a[c],c,a)!==!1;);return a}function N(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}function O(a,b){return a&&Ib(a,b,x)}function P(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function Q(a){return a!==a}function R(a,b,c){if(b!==b)return P(a,Q,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function S(a,b,d){function e(a,b){t.push(function(){i(a,b)})}function f(){if(0===t.length&&0===q)return d(null,p);for(;t.length&&b>q;){var a=t.shift();a()}}function g(a,b){var c=s[a];c||(c=s[a]=[]),c.push(b)}function h(a){var b=s[a]||[];M(b,function(a){a()}),f()}function i(a,b){if(!r){var e=C(c(function(b,c){if(q--,c.length<=1&&(c=c[0]),b){var e={};O(p,function(a,b){e[b]=a}),e[a]=c,r=!0,s=[],d(b,e)}else p[a]=c,h(a)}));q++;var f=b[b.length-1];b.length>1?f(p,e):f(e)}}function j(){for(var a,b=0;u.length;)a=u.pop(),b++,M(m(a),function(a){0===--v[a]&&u.push(a)});if(b!==o)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function m(b){var c=[];return O(a,function(a,d){ub(a)&&R(a,b,0)>=0&&c.push(d)}),c}"function"==typeof b&&(d=b,b=null),d=l(d||k);var n=x(a),o=n.length;if(!o)return d(null);b||(b=o);var p={},q=0,r=!1,s={},t=[],u=[],v={};O(a,function(b,c){if(!ub(b))return e(c,[b]),void u.push(c);var d=b.slice(0,b.length-1),f=d.length;return 0===f?(e(c,b),void u.push(c)):(v[c]=f,void M(d,function(h){if(!a[h])throw new Error("async.auto task `"+c+"` has a non-existent dependency in "+d.join(", "));g(h,function(){f--,0===f&&e(c,b)})}))}),j(),f()}function T(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function U(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function V(a){return"symbol"==typeof a||q(a)&&Pb.call(a)==Nb}function W(a){if("string"==typeof a)return a;if(V(a))return Sb?Sb.call(a):"";var b=a+"";return"0"==b&&1/a==-Qb?"-0":b}function X(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function Y(a,b,c){var d=a.length;return c=void 0===c?d:c,!b&&c>=d?a:X(a,b,c)}function Z(a,b){for(var c=a.length;c--&&R(b,a[c],0)>-1;);return c}function $(a,b){for(var c=-1,d=a.length;++c<d&&R(b,a[c],0)>-1;);return c}function _(a){return a.match(ic)}function aa(a){return null==a?"":W(a)}function ba(a,b,c){if(a=aa(a),a&&(c||void 0===b))return a.replace(jc,"");if(!a||!(b=W(b)))return a;var d=_(a),e=_(b),f=$(d,e),g=Z(d,e)+1;return Y(d,f,g).join("")}function ca(a){return a=a.toString().replace(nc,""),a=a.match(kc)[2].replace(" ",""),a=a?a.split(lc):[],a=a.map(function(a){return ba(a.replace(mc,""))})}function da(a,b){var c={};O(a,function(a,b){function d(b,c){var d=T(e,function(a){return b[a]});d.push(c),a.apply(null,d)}var e;if(ub(a))e=U(a),a=e.pop(),c[b]=e.concat(e.length>0?d:a);else if(1===a.length)c[b]=a;else{if(e=ca(a),0===a.length&&0===e.length)throw new Error("autoInject task functions require explicit parameters.");e.pop(),c[b]=e.concat(d)}}),S(c,b)}function ea(a){setTimeout(a,0)}function fa(a){return c(function(b,c){a(function(){b.apply(null,c)})})}function ga(){this.head=this.tail=null,this.length=0}function ha(a,b){a.length=1,a.head=a.tail=b}function ia(a,b,d){function e(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");return i.started=!0,ub(a)||(a=[a]),0===a.length&&i.idle()?qc(function(){i.drain()}):(M(a,function(a){var d={data:a,callback:c||k};b?i._tasks.unshift(d):i._tasks.push(d)}),void qc(i.process))}function f(a){return c(function(b){g-=1,M(a,function(a){M(h,function(b,c){return b===a?(h.splice(c,1),!1):void 0}),a.callback.apply(a,b),null!=b[0]&&i.error(b[0],a.data)}),g<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()})}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,h=[],i={_tasks:new ga,concurrency:b,payload:d,saturated:k,unsaturated:k,buffer:b/4,empty:k,drain:k,error:k,started:!1,paused:!1,push:function(a,b){e(a,!1,b)},kill:function(){i.drain=k,i._tasks.empty()},unshift:function(a,b){e(a,!0,b)},process:function(){for(;!i.paused&&g<i.concurrency&&i._tasks.length;){var b=[],c=[],d=i._tasks.length;i.payload&&(d=Math.min(d,i.payload));for(var e=0;d>e;e++){var j=i._tasks.shift();b.push(j),c.push(j.data)}0===i._tasks.length&&i.empty(),g+=1,h.push(b[0]),g===i.concurrency&&i.saturated();var k=C(f(b));a(c,k)}},length:function(){return i._tasks.length},running:function(){return g},workersList:function(){return h},idle:function(){return i._tasks.length+g===0},pause:function(){i.paused=!0},resume:function(){if(i.paused!==!1){i.paused=!1;for(var a=Math.min(i.concurrency,i._tasks.length),b=1;a>=b;b++)qc(i.process)}}};return i}function ja(a,b){return ia(a,1,b)}function ka(a,b,c,d){d=l(d||k),sc(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})}function la(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function ma(a){return function(b,c,d){return a(sc,b,c,d)}}function na(a){return a}function oa(a,b,c){return function(d,e,f,g){function h(a){g&&(a?g(a):g(null,c(!1)))}function i(a,d,e){return g?void f(a,function(d,h){g&&(d?(g(d),g=f=!1):b(h)&&(g(null,c(!0,a)),g=f=!1)),e()}):e()}arguments.length>3?(g=g||k,a(d,e,i,h)):(g=f,g=g||k,f=e,a(d,i,h))}}function pa(a,b){return b}function qa(a){return c(function(b,d){b.apply(null,d.concat([c(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&M(c,function(b){console[a](b)}))})]))})}function ra(a,b,d){function e(b,c){return b?d(b):c?void a(f):d(null)}d=C(d||k);var f=c(function(a,c){return a?d(a):(c.push(e),void b.apply(this,c))});e(null,!0)}function sa(a,b,d){d=C(d||k);var e=c(function(c,f){return c?d(c):b.apply(this,f)?a(e):void d.apply(null,[null].concat(f))});a(e)}function ta(a,b,c){sa(a,function(){return!b.apply(this,arguments)},c)}function ua(a,b,c){function d(b){return b?c(b):void a(e)}function e(a,e){return a?c(a):e?void b(d):c(null)}c=C(c||k),a(e)}function va(a){return function(b,c,d){return a(b,d)}}function wa(a,b,c){H(a,va(b),c)}function xa(a,b,c,d){D(b)(a,va(c),d)}function ya(a){return d(function(b,c){var d=!0;b.push(function(){var a=arguments;d?qc(function(){c.apply(null,a)}):c.apply(null,a)}),a.apply(this,b),d=!1})}function za(a){return!a}function Aa(a,b,c,d){d=l(d||k);var e=[];a(b,function(a,b,d){c(a,function(c,f){c?d(c):(f&&e.push({index:b,value:a}),d())})},function(a){a?d(a):d(null,T(e.sort(function(a,b){return a.index-b.index}),f("value")))})}function Ba(a,b){function c(a){return a?d(a):void e(c)}var d=C(b||k),e=ya(a);c()}function Ca(a,b,c,d){d=l(d||k);var e={};E(a,b,function(a,b,d){c(a,b,function(a,c){return a?d(a):(e[b]=c,void d())})},function(a){d(a,e)})}function Da(a,b){return b in a}function Ea(a,b){var e=Object.create(null),f=Object.create(null);b=b||na;var g=d(function(d,g){var h=b.apply(null,d);Da(e,h)?qc(function(){g.apply(null,e[h])}):Da(f,h)?f[h].push(g):(f[h]=[g],a.apply(null,d.concat([c(function(a){e[h]=a;var b=f[h];delete f[h];for(var c=0,d=b.length;d>c;c++)b[c].apply(null,a)})])))});return g.memo=e,g.unmemoized=a,g}function Fa(a,b,d){d=d||k;var e=j(b)?[]:{};a(b,function(a,b,d){a(c(function(a,c){c.length<=1&&(c=c[0]),e[b]=c,d(a)}))},function(a){d(a,e)})}function Ga(a,b){Fa(H,a,b)}function Ha(a,b,c){Fa(D(b),a,c)}function Ia(a,b){return ia(function(b,c){a(b[0],c)},b,1)}function Ja(a,b){var c=Ia(a,b);return c.push=function(a,b,d){if(null==d&&(d=k),"function"!=typeof d)throw new Error("task callback must be a function");if(c.started=!0,ub(a)||(a=[a]),0===a.length)return qc(function(){c.drain()});b=b||0;for(var e=c._tasks.head;e&&b>=e.priority;)e=e.next;M(a,function(a){var f={data:a,priority:b,callback:d};e?c._tasks.insertBefore(e,f):c._tasks.push(f)}),qc(c.process)},delete c.unshift,c}function Ka(a,b){return b=l(b||k),ub(a)?a.length?void M(a,function(a){a(b)}):b():b(new TypeError("First argument to race must be an array of functions"))}function La(a,b,c,d){var e=Nc.call(a).reverse();ka(e,b,c,d)}function Ma(a){return d(function(b,d){return b.push(c(function(a,b){if(a)d(null,{error:a});else{var c=null;1===b.length?c=b[0]:b.length>1&&(c=b),d(null,{value:c})}})),a.apply(this,b)})}function Na(a,b,c,d){Aa(a,b,function(a,b){c(a,function(a,c){a?b(a):b(null,!c)})},d)}function Oa(a){var b;return ub(a)?b=T(a,Ma):(b={},O(a,function(a,c){b[c]=Ma.call(this,a)})),b}function Pa(a){return function(){return a}}function Qa(a,b,c){function d(a,b){if("object"==typeof b)a.times=+b.times||f,a.intervalFunc="function"==typeof b.interval?b.interval:Pa(+b.interval||g);else{if("number"!=typeof b&&"string"!=typeof b)throw new Error("Invalid arguments for async.retry");a.times=+b||f}}function e(){b(function(a){a&&i++<h.times?setTimeout(e,h.intervalFunc(i)):c.apply(null,arguments)})}var f=5,g=0,h={times:f,intervalFunc:Pa(g)};if(arguments.length<3&&"function"==typeof a?(c=b||k,b=a):(d(h,a),c=c||k),"function"!=typeof b)throw new Error("Invalid arguments for async.retry");var i=1;e()}function Ra(a,b){return b||(b=a,a=null),d(function(c,d){function e(a){b.apply(null,c.concat([a]))}a?Qa(a,e,d):Qa(e,d)})}function Sa(a,b){Fa(sc,a,b)}function Ta(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}Cb(a,function(a,c){b(a,function(b,d){return b?c(b):void c(null,{value:a,criteria:d})})},function(a,b){return a?c(a):void c(null,T(b.sort(d),f("value")))})}function Ua(a,b,c){function e(){i||(g.apply(null,arguments),clearTimeout(h))}function f(){var b=a.name||"anonymous",d=new Error('Callback function "'+b+'" timed out.');d.code="ETIMEDOUT",c&&(d.info=c),i=!0,g(d)}var g,h,i=!1;return d(function(c,d){g=d,h=setTimeout(f,b),a.apply(null,c.concat(e))})}function Va(a,b,c,d){for(var e=-1,f=Vc(Uc((b-a)/(c||1)),0),g=Array(f);f--;)g[d?f:++e]=a,a+=c;return g}function Wa(a,b,c,d){Eb(Va(0,a,1),b,c,d)}function Xa(a,b,c,d){3===arguments.length&&(d=c,c=b,b=ub(a)?[]:{}),d=l(d||k),H(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})}function Ya(a){return function(){return(a.unmemoized||a).apply(null,arguments)}}function Za(a,b,d){if(d=C(d||k),!a())return d(null);var e=c(function(c,f){return c?d(c):a()?b(e):void d.apply(null,[null].concat(f))});b(e)}function $a(a,b,c){Za(function(){return!a.apply(this,arguments)},b,c)}function _a(a,b){function d(f){if(e===a.length)return b.apply(null,[null].concat(f));var g=C(c(function(a,c){return a?b.apply(null,[a].concat(c)):void d(c)}));f.push(g);var h=a[e++];h.apply(null,f)}if(b=l(b||k),!ub(a))return b(new Error("First argument to waterfall must be an array of functions"));if(!a.length)return b();var e=0;d([])}var ab,bb=Math.max,cb=f("length"),db="[object Function]",eb="[object GeneratorFunction]",fb=Object.prototype,gb=fb.toString,hb=9007199254740991,ib="function"==typeof Symbol&&Symbol.iterator,jb=Object.getPrototypeOf,kb=n(jb,Object),lb=Object.prototype,mb=lb.hasOwnProperty,nb=Object.keys,ob=n(nb,Object),pb="[object Arguments]",qb=Object.prototype,rb=qb.hasOwnProperty,sb=qb.toString,tb=qb.propertyIsEnumerable,ub=Array.isArray,vb="[object String]",wb=Object.prototype,xb=wb.toString,yb=9007199254740991,zb=/^(?:0|[1-9]\d*)$/,Ab=Object.prototype,Bb=F(E,1/0),Cb=I(J),Db=e(Cb),Eb=K(J),Fb=F(Eb,1),Gb=e(Fb),Hb=c(function(a,b){return c(function(c){return a.apply(null,b.concat(c))})}),Ib=N(),Jb="object"==typeof global&&global&&global.Object===Object&&global,Kb="object"==typeof self&&self&&self.Object===Object&&self,Lb=Jb||Kb||Function("return this")(),Mb=Lb.Symbol,Nb="[object Symbol]",Ob=Object.prototype,Pb=Ob.toString,Qb=1/0,Rb=Mb?Mb.prototype:void 0,Sb=Rb?Rb.toString:void 0,Tb="\\ud800-\\udfff",Ub="\\u0300-\\u036f\\ufe20-\\ufe23",Vb="\\u20d0-\\u20f0",Wb="\\ufe0e\\ufe0f",Xb="["+Tb+"]",Yb="["+Ub+Vb+"]",Zb="\\ud83c[\\udffb-\\udfff]",$b="(?:"+Yb+"|"+Zb+")",_b="[^"+Tb+"]",ac="(?:\\ud83c[\\udde6-\\uddff]){2}",bc="[\\ud800-\\udbff][\\udc00-\\udfff]",cc="\\u200d",dc=$b+"?",ec="["+Wb+"]?",fc="(?:"+cc+"(?:"+[_b,ac,bc].join("|")+")"+ec+dc+")*",gc=ec+dc+fc,hc="(?:"+[_b+Yb+"?",Yb,ac,bc,Xb].join("|")+")",ic=RegExp(Zb+"(?="+Zb+")|"+hc+gc,"g"),jc=/^\s+|\s+$/g,kc=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,lc=/,/,mc=/(=.+)?(\s*)$/,nc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,oc="function"==typeof setImmediate&&setImmediate,pc="object"==typeof process&&"function"==typeof process.nextTick;ab=oc?setImmediate:pc?process.nextTick:ea;var qc=fa(ab);ga.prototype.removeLink=function(a){return a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev,a.prev=a.next=null,this.length-=1,a},ga.prototype.empty=ga,ga.prototype.insertAfter=function(a,b){b.prev=a,b.next=a.next,a.next?a.next.prev=b:this.tail=b,a.next=b,this.length+=1},ga.prototype.insertBefore=function(a,b){b.prev=a.prev,b.next=a,a.prev?a.prev.next=b:this.head=b,a.prev=b,this.length+=1},ga.prototype.unshift=function(a){this.head?this.insertBefore(this.head,a):ha(this,a)},ga.prototype.push=function(a){this.tail?this.insertAfter(this.tail,a):ha(this,a)},ga.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ga.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var rc,sc=F(E,1),tc=c(function(a){return c(function(b){var d=this,e=b[b.length-1];"function"==typeof e?b.pop():e=k,ka(a,b,function(a,b,e){b.apply(d,a.concat([c(function(a,b){e(a,b)})]))},function(a,b){e.apply(d,[a].concat(b))})})}),uc=c(function(a){return tc.apply(null,a.reverse())}),vc=I(la),wc=ma(la),xc=c(function(a){var b=[null].concat(a);return d(function(a,c){return c.apply(this,b)})}),yc=oa(H,na,pa),zc=oa(E,na,pa),Ac=oa(sc,na,pa),Bc=qa("dir"),Cc=F(xa,1),Dc=oa(H,za,za),Ec=oa(E,za,za),Fc=F(Ec,1),Gc=I(Aa),Hc=K(Aa),Ic=F(Hc,1),Jc=qa("log"),Kc=F(Ca,1/0),Lc=F(Ca,1);rc=pc?process.nextTick:oc?setImmediate:ea;var Mc=fa(rc),Nc=Array.prototype.slice,Oc=I(Na),Pc=K(Na),Qc=F(Pc,1),Rc=oa(H,Boolean,na),Sc=oa(E,Boolean,na),Tc=F(Sc,1),Uc=Math.ceil,Vc=Math.max,Wc=F(Wa,1/0),Xc=F(Wa,1),Yc={applyEach:Db,applyEachSeries:Gb,apply:Hb,asyncify:L,auto:S,autoInject:da,cargo:ja,compose:uc,concat:vc,concatSeries:wc,constant:xc,detect:yc,detectLimit:zc,detectSeries:Ac,dir:Bc,doDuring:ra,doUntil:ta,doWhilst:sa,during:ua,each:wa,eachLimit:xa,eachOf:H,eachOfLimit:E,eachOfSeries:sc,eachSeries:Cc,ensureAsync:ya,every:Dc,everyLimit:Ec,everySeries:Fc,filter:Gc,filterLimit:Hc,filterSeries:Ic,forever:Ba,log:Jc,map:Cb,mapLimit:Eb,mapSeries:Fb,mapValues:Kc,mapValuesLimit:Ca,mapValuesSeries:Lc,memoize:Ea,nextTick:Mc,parallel:Ga,parallelLimit:Ha,priorityQueue:Ja,queue:Ia,race:Ka,reduce:ka,reduceRight:La,reflect:Ma,reflectAll:Oa,reject:Oc,rejectLimit:Pc,rejectSeries:Qc,retry:Qa,retryable:Ra,seq:tc,series:Sa,setImmediate:qc,some:Rc,someLimit:Sc,someSeries:Tc,sortBy:Ta,timeout:Ua,times:Wc,timesLimit:Wa,timesSeries:Xc,transform:Xa,unmemoize:Ya,until:$a,waterfall:_a,whilst:Za,all:Dc,any:Rc,forEach:wa,forEachSeries:Cc,forEachLimit:xa,forEachOf:H,forEachOfSeries:sc,forEachOfLimit:E,inject:ka,foldl:ka,foldr:La,select:Gc,selectLimit:Hc,selectSeries:Ic,wrapSync:L};a["default"]=Yc,a.applyEach=Db,a.applyEachSeries=Gb,a.apply=Hb,a.asyncify=L,a.auto=S,a.autoInject=da,a.cargo=ja,a.compose=uc,a.concat=vc,a.concatSeries=wc,a.constant=xc,a.detect=yc,a.detectLimit=zc,a.detectSeries=Ac,a.dir=Bc,a.doDuring=ra,a.doUntil=ta,a.doWhilst=sa,a.during=ua,a.each=wa,a.eachLimit=xa,a.eachOf=H,a.eachOfLimit=E,a.eachOfSeries=sc,a.eachSeries=Cc,a.ensureAsync=ya,a.every=Dc,a.everyLimit=Ec,a.everySeries=Fc,a.filter=Gc,a.filterLimit=Hc,a.filterSeries=Ic,a.forever=Ba,a.log=Jc,a.map=Cb,a.mapLimit=Eb,a.mapSeries=Fb,a.mapValues=Kc,a.mapValuesLimit=Ca,a.mapValuesSeries=Lc,a.memoize=Ea,a.nextTick=Mc,a.parallel=Ga,a.parallelLimit=Ha,a.priorityQueue=Ja,a.queue=Ia,a.race=Ka,a.reduce=ka,a.reduceRight=La,a.reflect=Ma,a.reflectAll=Oa,a.reject=Oc,a.rejectLimit=Pc,a.rejectSeries=Qc,a.retry=Qa,a.retryable=Ra,a.seq=tc,a.series=Sa,a.setImmediate=qc,a.some=Rc,a.someLimit=Sc,a.someSeries=Tc,a.sortBy=Ta,a.timeout=Ua,a.times=Wc,a.timesLimit=Wa,a.timesSeries=Xc,a.transform=Xa,a.unmemoize=Ya,a.until=$a,a.waterfall=_a,a.whilst=Za,a.all=Dc,a.allLimit=Ec,a.allSeries=Fc,a.any=Rc,a.anyLimit=Sc,a.anySeries=Tc,a.find=yc,a.findLimit=zc,a.findSeries=Ac,a.forEach=wa,a.forEachSeries=Cc,a.forEachLimit=xa,a.forEachOf=H,a.forEachOfSeries=sc,a.forEachOfLimit=E,a.inject=ka,a.foldl=ka,a.foldr=La,a.select=Gc,a.selectLimit=Hc,a.selectSeries=Ic,a.wrapSync=L}),define("deduction",["base"],function(a){var b=function(a,b,c){if(!(a&&a instanceof Array))return void alert("请正确传入数据内容");if(!b||0==b.length)return void alert("数据容器为空");this.data=a,this.minHeight="30px",this.extentSetting(c),this.initData(b);var d="click",e=this;this.isLocal&&(d="touchend"),b.on(d,".deduction-tip-left",$.proxy(this,"showDeductionTags")),b.on(d,".deduction-tip-right",$.proxy(this,"createModal")),$(document).on(d,".deduction-footer",function(){e.controlDeductionTagsTips(!1)})};b.prototype=new a,b.constructor=b;var c=b.prototype;c.extentSetting=function(a){if(this.config=d,a)for(var b in d){var c=a[b];"undefined"!=c&&(this.config[b]=c)}},c.initData=function(a){this.fillInTags(a)},c.fillInTags=function(a){for(var b,c=this.data.length,d='<ul class="deduction-tip-left hide">',e=0;c>e;e++)b=this.data[e],d+='<li><img src="http://pic.hisihi.com/2016-09-24/1474707998563641.png"/><span>'+b.value+"</span></li>";d+='</ul><div class="deduction-tip-right" style="background: url(http://pic.hisihi.com/2016-09-24/1474708134912749.png);"></div>',a.html(d).css("height",this.minHeight)},c.showDeductionTags=function(a){var b=$(a.currentTarget).closest("ul"),c=b.parent();c.height();c.hasClass("show")?c.css("height",this.minHeight).removeClass("show"):c.css("height",b.height()-4).addClass("show")},c.createModal=function(){if(0==$(".deduction-modal").length){for(var a,b=$('<div class="deduction-modal"><div class="deduction-main"><div class="deduction-head">嘿设汇为您提供</div><div class="deduction-content"><ul class="deduction-ul"></ul></div><div class="deduction-footer"><div>我知道了</div></div></div></div>'),c="",d=this.data.length,e=0;d>e;e++)a=this.data[e],c+='<li><div class="li-left"><img src="http://pic.hisihi.com/2016-09-24/1474707998563641.png"/></div><div class="li-right"><span>'+a.value+"</span><p>"+a.extra+"</p></div></li>";c+='<div class="deduction-tip-right"></div>',b.find(".deduction-ul").html(c),$("body").append(b)}this.controlDeductionTagsTips(!0)},c.controlDeductionTagsTips=function(a){if(this.config.showDeductionTagsCallBack)return void this.config.showDeductionTagsCallBack.call();var b=$(".deduction-modal");a?(b.removeClass("hide").addClass("show"),this.scrollControl(!1)):(b.removeClass("show").addClass("hide"),this.scrollControl(!0))};var d={showDeductionTagsCallBack:null};return b}),define("home",["base","async","myPhotoSwipe","deduction","lazyloading"],function(a,b,c,d){function e(a,b,d){this.$wrapper=a;var e=this;this.baseUrl=d,this.oid=b;var f="click",e=this;this.isLocal&&(this.baseUrl=this.baseUrl.replace("api.php","hisihi-cms/api.php")),this.perPageSize=10,this.pageIndex=1,this.async=!0,this.showGuaranteeBorder=!1,this.controlLoadingBox(!0),window.setTimeout(function(){e.initData()},100),$(document).on(f,".pics-preview-box .li-video",$.proxy(this,"showPicsAndVideoDetailInfo")),$(document).on(f,".coupon-box li, .t-video-box li,.name-main-box img, .collection",function(){e.showTips("<p>请下载嘿设汇App</p>",3e3),window.setTimeout(function(){window.location.href="http://www.hisihi.com/download.php"},3e3)}),$(document).on(f,".video-modal",function(){event.stopPropagation(),event.target==this&&($(".modal").removeClass("show"),e.scrollControl(!0),e.myPlayer.pause())}),$(document).on("input","#user-name, #phone-num",$.proxy(this,"singInBtnControl")),$(document).on(f,".sing-in-box .active",$.proxy(this,"singIn")),$(document).on(f,".sing-in,.appointment",$.proxy(this,"showSingInModal")),$(document).on(f,".close-sing-in",$.proxy(this,"closeSingInBox")),$(document).on(f,".show-more-course",$.proxy(this,"showAllLesson")),new c(".works-preview-box",{bgFilter:!0})}var f={downloadBar:{show:!0,pos:0}};e.prototype=new a(f),e.constructor=e;var g=e.prototype;return g.initData=function(){var a=this;b.parallel({basic:function(b){a.loadBasicInfoData(function(c){return c?void b(null,c):(a.showTips("机构不存在"),void a.controlLoadingBox(!1))})},announcement:function(b){a.loadTopAnnouncement(function(a){b(null,a)})},signUp:function(b){a.loadSignUpInfo(function(a){b(null,a)})},course:function(b){a.loadTeachingCourse(function(a){b(null,a)})},pics:function(b){a.loadPics(function(a){b(null,a)})},video:function(b){a.loadVideo(function(a){b(null,a)})},teacher:function(b){a.loadMyTeachersInfo(function(a){b(null,a)})},teachingVideo:function(b){a.loadTeachingVideoInfo(function(a){b(null,a)})},works:function(b){a.loadWorksInfo(function(a){b(null,a)})},groups:function(b){a.loadGroupsInfo(function(a){b(null,a)})},detailComment:function(b){a.loadDetailCommentInfo(1,function(a){b(null,a)})}},function(b,c){var d;for(var e in c){var f=null;switch(d=c[e],e){case"basic":f=a.fillInBasicInfoData;break;case"announcement":f=a.fillInTopAnnouncement;break;case"signUp":f=a.fillInSignUpInfo;break;case"coupon":f=a.fillInCouponInfo;break;case"course":f=a.fillInCourseInfo;break;case"pics":a.fillInPicsAndVideo([c.video],d);break;case"video":break;case"teacher":f=a.fillMyTeachersInfo;break;case"teachingVideo":a.fillInTeachingVideo(d,c.basic);break;case"works":f=a.fillWorksInfo;break;case"groups":f=a.filInGroupsInfo;break;case"detailComment":a.fillDetailCommentInfo(d)}f&&f.call(a,d)}$("#wrapper,#footer").show(),a.controlLoadingBox(!1),$(".lazy-img").picLazyLoad($(window),{threshold:150})})},g.initVideoPlayer=function(){var a=this;videojs("video-player").ready(function(){a.myPlayer=this})},g.resetVideoPlayerUrl=function(a,b){this.myPlayer||this.initVideoPlayer(),this.myPlayer.src({type:"application/x-mpegURL",src:a}),b||(b="http://pic.hisihi.com/hisihi_home_pic/video_cover.png"),this.myPlayer.poster(b),$(".modal").eq(0).addClass("show")},g.loadBasicInfoData=function(a){var b=this,c=(b.$wrapper.find(".logoAndCertInfo"),{url:this.baseUrl+"appGetBaseInfo",paraData:{organization_id:this.oid,version:3.02},sCallback:function(b){a&&a(b)},eCallback:function(){$(".contact a").attr("href","javacript:void(0)").css("opacity","0.3"),a&&a(null)},type:"get",async:this.async});this.getDataAsync(c)},g.fillInBasicInfoData=function(a){$(".logo-box").show();var b=a.data,c=b.logo;
this.deviceType.android&&(c=window.hisihiUrlObj.image+"/orgbasicinfo/blur.jpg");var d=b.name;d.length>10&&(d=d.substr(0,9)+" …");var e=$(".logo-box");e.find("#filter-logo").attr("src",c),e.find("#logo").attr("src",b.logo),e.find(".name-main-box .org-name").text(b.name),this.setCertInfo(b.authenticationInfo);var f=e.find(".user-number-box label");if(f.eq(0).text(this.translationCount(b.view_count)),f.eq(1).text(this.translationCount(b.followCount)),b.introduce&&$(".my-introduce").text(b.introduce).parent().show(),b.location&&$(".my-location").text(b.location).parent().show(),b.advantage){for(var g=b.advantage.split("#"),h="",i=0;i<g.length;i++)h+="<li>"+g[i]+"</li>";$(".my-tags").html(h).parent().show()}$(".contact a").attr("href","tel:"+b.phone_num),this.fillAppointmentInfo(a),this.fillInDeductionTags(a)},g.setCertInfo=function(a){if(a&&0!=a.length){for(var b,c="",d="",e=a.length,f=0;e>f;f++)if(b=a[f],"1"==b.default_display){if(b.hisihi_add_v&&1==b.hisihi_add_v){$(".v-cert").show();continue}d=b.tag_pic_url,c+='<img src="'+d+'">'}$(".cert-box").html(c)}},g.loadCouponInfo=function(a){this.getDataAsync({url:this.baseUrl+"/v1/org/41/teaching_course",paraData:{organization_id:this.oid,version:2.95},sCallback:function(b){a&&a(b)},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.fillInCouponInfo=function(a){if(a&&0!=a.list.length){for(var b,c=a.list,d=c.length,e="",f=0;d>f;f++)b=c[f],b.is_out_of_date||(e+='<li><div class="coupon-header">￥'+b.money+'</div><div class="coupon-bottom"><p>适用于：'+b.course_name+"</p></div></li>");$(".coupon-box").show().find("ul").html(e)}},g.fillInCourseInfo=function(a){if(a&&a.courses&&0!=a.courses.length){for(var b,c=a.courses,d=c.length,e="",f="",g=0,h=0;d>h;h++){b=c[h],f=this.getRightStrAndMarginInfo(b.rebate_info),g++;var i=this.judgeInfoNullInfo(b.price);i=""!=i?"￥"+i:'<label class="noprice">暂无报价</label>',e+='<li data-course-id="'+b.id+'"><a href="'+this.baseUrl+"teaching_course_main_page_v3_02/course_id/"+b.id+'"><div class="item-main"><div class="left"><div class="img-box"><img class="lazy-img" data-original="'+b.cover_pic+'@66h_66w_2e"></div></div><div class="middle"><p class="title-info hasCoupon">'+b.course_name+'</p><p class="money-info">'+i+"</p></div>"+f+"</div></a></li>"}if(e){$(".deduction-detail").find("ul").html(e),$(".coupon").show();var j=g-2,k=105,l=$(".deduction-detail");if(j>0){k=215;var m="slow";j>8&&(m="fast"),j>3&&8>=j&&(m="normal"),$(".show-more-course").show().find("span").eq(0).text("查看其他"+j+"个优惠课程")}0==j&&(k=195),l.addClass(m).css("height",k).attr({"data-height":k,"data-diff":j})}}},g.judgeInfoNullInfo=function(a){var b=a;return"string"==typeof a&&(b=b.trim()),a&&""!=a&&0!=a||(b=""),b},g.getRightStrAndMarginInfo=function(a){var b="";if(a){var c=this.translationCount(a.rebate_value),d=this.translationCount(a.value);b='<div class="right"><div class="right-main"><div class="money">￥'+d+'</div><div class="deduction-money">抵￥'+c+"</div></div></div>"}return b},g.loadTopAnnouncement=function(a){this.getDataAsyncPy({url:window.hisihiUrlObj.apiUrlPy+"v1/org/"+this.oid+"/news",sCallback:function(b){a&&a(b)},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.fillInTopAnnouncement=function(a){if(a&&a.news&&0!=a.news.length){var b,c="",d=a.news,e=$(".news-box");e.show();for(var f=d.length,g=0;f>g;g++)2>g&&(b=d[g],c+='<a href="'+b.url+'"><p>'+b.title+"</p></a>");e.find(".right-item div").html(c)}},g.scrollSingInInfo=function(){var a=$(".sing-up-detail-box"),b=a.find("p"),c=40,d=(b.length,-c+"px"),e={"margin-top":d,"-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)",opacity:"0.7"};window.setInterval(function(){a.animate(e,500,"ease-out",function(){a.find("p").eq(0).appendTo(a),a.css({marginTop:0,opacity:"1"})})},2500)},g.loadSignUpInfo=function(a){this.getDataAsync({url:this.baseUrl+"enrollList",paraData:{organization_id:this.oid,type:"all"},sCallback:function(b){a&&a(b.data)},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.fillInSignUpInfo=function(a){var b,c="",d=!a||0==a.length;if(!d){for(var e=a.length,f=0;e>f;f++){b=a[f];var g=new Date(1e3*b.create_time).format("yyyy-MM-dd");c+="<p><span>"+b.student_name+"</span>同学 于 "+g+" 成功报名</p>"}$(".sing-up-main").show().find(".sing-up-detail-box").html(c),this.showGuaranteeBorder&&$(".sing-up-guarantee").addClass("border"),a.length>1&&this.scrollSingInInfo()}},g.fillInDeductionTags=function(a){if(a&&a.data){var b=a.data.teaching_course_tag_list;if(b.length>0){var c=$(".deduction-tip").show();new d(b,c)}}},g.loadTeachingCourse=function(a){this.getDataAsyncPy({url:window.hisihiUrlObj.apiUrlPy+"/v1/org/"+this.oid+"/teaching_course",paraData:{page:1,per_page:1e5,except_id:""},sCallback:function(b){a&&a(b)},eCallback:function(){a&&a(null)},type:"get",beforeSend:function(a){a.setRequestHeader("version","3.02")}})},g.loadVideo=function(a){this.getDataAsync({url:this.baseUrl+"getPropagandaVideo",paraData:{organization_id:this.oid,count:8},sCallback:function(b){a&&a([b.data])},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.loadPics=function(a){this.getDataAsync({url:this.baseUrl+"appGetOrganizationEnvironment",paraData:{organization_id:this.oid,count:8},sCallback:function(b){a&&a(b)},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.fillInPicsAndVideo=function(a,b){var c=this.getVideoStr(a),d=this.getPicsStr(b.data,!0),e=c;""!=d&&(d='<ul class="works-preview-box">'+d+"</ul>"),e=c+d,""!=e&&$(".pics-box").show().find(".pics-preview-box ul").html(e)},g.getPicsStr=function(a,b){var c=$(".pics-number label").eq(1);if(!a||0==a.length)return"";var d,e,f,g=a.length,h="";b&&c.text(g+"照片").css("display","inline");for(var i=0;g>i;i++)f=a[i],d=f.picture,e=f.thumb,h+='<li class="li-img" data-id="'+f.id+'"><a href="'+d.url+'" data-size="'+d.size.width+"x"+d.size.height+'"></a><img class="lazy-img works" data-original="'+e.url+'"></li>';return h},g.getVideoStr=function(a,b){if(a&&0!=a.length){var c,d=a.length,e="",f="",g=$(".pics-number label").eq(0),h="";if(b){var i=7*$("body").width()/16;f="height:"+i+"px;",$(".name-main-box img").css("display","inline-block")}else{if(!a[0].video_url)return g.hide(),"";g.text(d+"视频").show(),h="li-video"}for(var j=0;d>j;j++)c=a[j],c.video_img=c.video_img||c.img||"",c.video_url=c.video_url||"",e+='<li data-url="'+c.video_url+'" style="'+f+'" class="'+h+'"><img class="lazy-img" data-original="'+c.video_img+'"><span class="p-btn"><i class="icon-play"></i></span></li>';return e}},g.showPicsAndVideoDetailInfo=function(a){var b=$(a.currentTarget),c=b.data("url");return c?(this.resetVideoPlayerUrl(b.data("url"),b.find("img").attr("src")),void this.scrollControl(!1)):void this.showTips("视频暂无")},g.loadMyTeachersInfo=function(a){this.getDataAsync({url:this.baseUrl+"appGetTeacherList",paraData:{organization_id:this.oid},sCallback:function(b){a&&a(b.teacherList)},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.fillMyTeachersInfo=function(a){var b,c="";if(a&&0!=a.length){for(var d=a.length,e=0;d>e;e++)b=a[e].info,c+='<li><a target="_blank" href="'+this.baseUrl.replace("Organization","Teacher")+"teacherv3_1/uid/"+a[e].uid+'"><img src="'+b.avatar128+'"><p>'+b.nickname+"</p></a></li>";$(".teachers-box").show(),$(".teachers-detail").html(c)}},g.loadTeachingVideoInfo=function(a){this.getDataAsync({url:this.baseUrl+"appGetCoursesList",paraData:{organization_id:this.oid},sCallback:function(b){a&&a(b)},eCallback:function(b){$target.css("opacity",1),$target.find(".loadErrorCon").show().find("a").text("获取视频信息失败，，点击重新加载").show(),a()},type:"get",async:this.async})},g.fillInTeachingVideo=function(a,b){if(a&&0!=a.coursesList.length){var c=$(".t-video-box").show(),d=this.getVideoStr(a.coursesList,!0);c.find(".basic-header span").html("("+a.coursesList.length+")"),c.find("ul").html(d)}},g.fillAppointmentInfo=function(a){var b=parseInt(a.data.is_listen_preview)&&0!=a.data.listen_preview_text.length;if(b){var c='<div class="left-item"></div><div class="middle-item"><p>'+a.data.listen_preview_text+'</p></div><div class="right-item"></div>';$(".appointment").show().html(c).css("height","44px")}},g.showTeachingVideo=function(a){this.showTips("下载App")},g.loadWorksInfo=function(a){this.getDataAsync({url:this.baseUrl+"appGetStudentWorks",paraData:{organization_id:this.oid,count:8,version:2.9},sCallback:function(b){a&&a(b)},eCallback:function(a){},type:"get",async:this.async})},g.fillWorksInfo=function(a){if(a&&a.data&&0!=a.data.length){var b=$(".works-box").show(),c=a.data,d=(c.length,this.getPicsStr(a.data,!1));b.find("ul").html(d)}},g.loadGroupsInfo=function(a){this.getDataAsyncPy({url:window.hisihiUrlObj.apiUrlPy+"/v1/im/org/"+this.oid+"/groups",paraData:{per_page:1},sCallback:function(b){a&&a(b)},eCallback:function(b){a&&a(null)},type:"get",async:this.async})},g.filInGroupsInfo=function(a){if(a&&0!=a.data.length){var b=$(".groups-box").show(),c=a.data[0],d='<div class="left"><img src="'+c.group_avatar+'"></div><div class="right"><p>'+c.group_name+"</p></div>";b.find(".groups-detail-box").html(d)}},g.loadDetailCommentInfo=function(a,b,c){c||(c=this.perPageSize);var d=this;this.getDataAsync({url:this.baseUrl+"commentList",paraData:{organization_id:this.oid,page:1,count:c,comment_type:a,version:"3.1"},sCallback:function(a){b&&b.call(d,a)},eCallback:function(a){},type:"get",async:this.async})},g.fillDetailCommentInfo=function(a){var b=(0|a.totalCount)+(0|a.totalCount);if($("#commentNum").text(b),0==b)return void $(".studentCommentDetail .nodata").show();for(var c,d,e,f=a.data,g="",h=null==f?0:f.length,i=null,j=null,k="",l=0;h>l;l++)c=f[l],d=c.userInfo,e=this.getDiffTime(c.create_time,!0),e.indexOf("-")>=0&&(e=e.split(" ")[0]),i=this.getChooseReaons(c),j=this.getCommentPics(c.pic_info),k=c.comment||"",i.flag&&(j.flag||""!==k)&&(i.str=i.str.replace(/no-border/,"border-box")),g+='<li><div class="comment-box-head"><div class="user-img-box"><img src="'+d.avatar128+'"/></div><div class="user-name-box"><div class="commentNickname">'+d.nickname+'</div><div class="publicTime">'+e+'</div></div><div class="user-star-box"><span class="rightItem starsCon">'+this.getStarInfoByScore(0|c.comprehensive_score)+'</span><div class="total-comment-count">'+this.getChildrenCommentCounts(c.childCommentCount)+'</div></div></div><div class="commentCon">'+i.str+'<p class="content">'+k+"</p>"+j.str+'</div><div class="border-box"></div></li>';$(".studentCommentDetail").append(g)},g.getChildrenCommentCounts=function(a){return a|=0,a>0?(a=this.translationCount(a),"共有"+a+"条评论"):""},g.getChooseReaons=function(a){var b,c=[{key:"选择原因",val:a.choose_reason},{key:"教学师资",val:a.teaching_group},{key:"教学质量",val:a.teaching_quality},{key:"教学环境",val:a.teaching_env},{key:"就业服务",val:a.employ_service}],d="",e=!1;for(var f in c)b=c[f],b.val&&(e=!0,d+='<div class="comment-reason-item"><span class="field-name">'+b.key+'</span><span class="field-val">'+b.val+"</span></div>");return{flag:e,str:'<div class="comment-reason-box">'+d+'<div class="no-border"></div></div>'}},g.getCommentPics=function(a){var b="",c=!1;if(a){var d,e=a.length,f=.33*$("body").width()|"0px",g="height:"+f;e>0&&(c=!0);for(var h=0;e>h;h++)d=a[h],b+='<li class="li-img" style="'+g+'"><img class="lazy-img works" data-original="'+d+'"></li>';b='<ul class="comment-img-list works-preview-box">'+b+"</ul>"}return{str:b,flag:c}},g.getNetComment=function(a){for(var b,c,d,e=a.data,f=null==e?0:e.length,g="",h=0;f>h;h++)b=e[h],c=b.userInfo,d=this.getDiffTime(b.create_time,!0),d.indexOf("-")>=0&&(d=d.split(" ")[0]),g+='<li><div class="comment-box-head"><div class="commentNickname">'+b.name+'</div></div><div class="commentCon"><p class="content">'+b.content+'</p></div><div class="comment-box-bottom"><div class="publicTime">'+d+'</div><div class="public-location">'+b.from+'</div></div><div class="border-box"></div></li>';return g},g.getStarInfoByScore=function(a){a.toString().indexOf(".")>0&&(a=this.myRoundNumber(a));for(var b="",c=Math.floor(a),d=Math.ceil(a),e=d==c?0:1,f=5-d,g=0;c>g;g++)b+="<i></i>";1==e&&(b+='<i class="half"></i>');for(var g=0;f>g;g++)b+='<i class="none"></i>';return b},g.myRoundNumber=function(a){a=a.toFixed(1);var b=a.split("."),c=b[0],d=b[1];if(0!=d){var e=2>=d,f=d>=7;return e?0|c:f?parseInt(c)+1:parseInt(c)+.5}},g.showSingInModal=function(){$(".sing-in-modal").addClass("show"),$(".sing-in-item input").eq(0).val()&&$(".sing-in-btn").addClass("active"),this.scrollControl(!1)},g.singInBtnControl=function(a){var b=$(".sing-in-item input"),c=b.eq(0).val().trim(),d=$(".sing-in-btn"),e="active";c?d.addClass(e):d.removeClass(e)},g.singIn=function(){var a=$(".sing-in-item input"),b=this,c=a.eq(0).val().trim(),d=a.eq(1).val().trim(),e=/^1\d{10}$/;return e.test(c)?(this.controlLoadingBox(!0),void this.getDataAsync({url:this.baseUrl+"yuyue/organization_id/"+this.oid+"/mobile/"+c+"/username/"+d,sCallback:function(a){b.controlLoadingBox(!1),a.success?($(".sing-in-modal .tips").css("opacity","1"),b.showTips("预约成功")):b.showTips("预约失败")},eCallback:function(a){b.controlLoadingBox(!1);var c="预约失败";-2==a.code&&(c="不能重复预约"),b.showTips(c)},type:"get"})):void this.showTips("请正确输入手机号码")},g.closeSingInBox=function(){$(".sing-in-modal").removeClass("show"),this.scrollControl(!0)},g.showAllLesson=function(a){var b=$(a.currentTarget),c=b.find("span"),d=b.find("i"),e=b.parent(),f=e.find("ul").height(),g=1;if(e.hasClass("show")){var h=e.data("height"),i=e.data("diff");i>8&&this.initTimer(),e.css("height",h).removeClass("show"),d.removeClass("up"),g=0}else e.css("height",f+35).addClass("show"),d.addClass("up"),this.lesssonScrollTop=$("body").scrollTop();c.eq(g).addClass("show").siblings().removeClass("show")},g.initTimer=function(){this.timer=setInterval($.proxy(this,"runToPos"),.05)},g.runToPos=function(){var a=$("body").scrollTop();a-=20,a>this.lesssonScrollTop?window.scrollTo(0,a):clearInterval(this.timer)},e}),requirejs.config({baseUrl:window.hisihiUrlObj.js,paths:{$:"zepto.min",fx:"fx_v1.1",prefixfree:"prefixfree.min",base:"base-1.1",fastclick:"fastclick",lazyloading:"lazyloading",photoswipe:"photoswipe/photoswipe.min",photoswipeui:"photoswipe/photoswipe-ui-default.min",myPhotoSwipe:"photoswipe/myphotoswipe",home:"../orgbasicinfo/3.1/orgbasicinfo",deduction:"../orgbasicinfo/3.1/deduction",async:"async"},shim:{$:{output:"$"},prefixfree:{output:"prefixfree"},fastclick:{output:"fastclick"}}}),require(["home","prefixfree"],function(a){var b=window.location.href;b.indexOf("%2F")>0&&(b=b.replace(/\%2F/g,"/"));var c=/organization_id\/[1-9][0-9]*/g,d=b.match(c)[0].toString().replace(/organization_id\//g,"");window.orgBasicInfo=new a($("#wrapper"),d,window.hisihiUrlObj.apiUrl)}),define("config",function(){});