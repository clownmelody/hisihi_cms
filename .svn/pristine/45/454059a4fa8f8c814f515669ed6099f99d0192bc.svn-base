<extend name="Public/base" />

<block name="body">
	<div class="main-title cf">
		<h2><if condition="ACTION_NAME eq 'addaction'">新增<else/>编辑</if>行为</h2>
	</div>
	<!-- 表单 -->
	<form id="form" action="{:addons_url('Action://Action/update')}" method="post" class="form-horizontal">
		<div class="form-item cf">
			<label class="item-label">行为标识<span class="check-tips">（输入行为标识 英文字母）</span></label>
			<div class="controls">
				<input type="text" class="text input-large" name="name" value="{$data.name}">
			</div>
		</div>
		<div class="form-item cf">
			<label class="item-label">行为名称<span class="check-tips">（输入行为名称）</span></label>
			<div class="controls">
				<input type="text" class="text input-large" name="title" value="{$data.title}">
			</div>
		</div>
		<div class="form-item cf">
			<label class="item-label">行为类型<span class="check-tips">（选择行为类型）</span></label>
			<div class="controls">
				<select name="type">
					<volist name=":get_action_type(null,true)" id="vo">
						<option value="{$key}">{$vo}</option>
					</volist>
				</select>
			</div>
		</div>
		<div class="form-item cf">
			<label class="item-label">变化经验<span class="check-tips">（输入行为操作变化的经验 如：+10 or -10）</span></label>
			<div class="controls">
				<input type="text" class="text input-large" name="score" value="{$data.score}">
			</div>
		</div>	
		<div class="form-item cf">
			<label class="item-label">变化积分<span class="check-tips">（输入行为操作变化的积分 如：+10 or -10）</span></label>
			<div class="controls">
				<input type="text" class="text input-large" name="tox_money" value="{$data.tox_money}">
			</div>
		</div>
		<div class="form-item cf">
			<label class="item-label">设置间隔<span class="check-tips">（输入行为操作时间间隔  目前仅支持小时数）</span></label>
			<div class="controls">
				<input type="text" class="text input-large" name="cycle" value="{$data.cycle}">
			</div>
		</div>
		<div class="form-item cf">
			<label class="item-label">设置上限<span class="check-tips">（输入行为操作时间间隔  如：1）</span></label>
			<div class="controls">
				<input type="text" class="text input-large" name="max" value="{$data.max}">
			</div>
		</div>		
		<div class="form-item cf">
			<label class="item-label">行为描述<span class="check-tips">（输入行为描述）</span></label>
			<div class="controls">
				<label class="textarea input-large"><textarea name="remark">{$data.remark}</textarea></label>
			</div>
		</div>
		<div class="form-item cf">
			<label class="item-label">日志规则<span class="check-tips">（记录日志备注时按此规则来生成，支持[变量|函数]。目前变量有：user,time,model,record,data）</span></label>
			<div class="controls">
				<label class="textarea input-large"><textarea name="log">{$data.log}</textarea></label>
			</div>
		</div>
		<div class="form-item">
			<input type="hidden" name="id" value="{$data.id}"/>
			<button type="submit" class="btn submit-btn ajax-post" target-form="form-horizontal">确 定</button>
			<button class="btn btn-return" onclick="javascript:history.back(-1);return false;">返 回</button>
		</div>
	</form>
</block>

<block name="script">
<script type="text/javascript" src="__STATIC__/uploadify/jquery.uploadify.min.js"></script>
<script type="text/javascript" charset="utf-8">
	Think.setValue('type',{$type|default=1});
    //导航高亮
    highlight_subnav('{:U('User/action')}');
</script>
</block>
